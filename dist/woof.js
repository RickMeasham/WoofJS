"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_slicedToArray=function(){function e(e,t){var n=[],o=!0,r=!1,a=void 0;try{for(var s,p=e[Symbol.iterator]();!(o=(s=p.next()).done)&&(n.push(s.value),!(t&&n.length===t));o=!0);}catch(e){r=!0,a=e}finally{try{!o&&p["return"]&&p["return"]()}finally{if(r)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}window.BrowserImage=Image;function Woof(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},t=e.global,n=t!==void 0&&t,o=e.fullScreen,r=e.height,a=r===void 0?500:r,s=e.width,p=s===void 0?350:s;if(window.global)throw new Error("You must turn off global mode in the Woof script tag if you want to create your own Woof object.");this.global=n;var l=this.global?window:this;l.global=n,l.sprites=[],l.backdrop={color:null,type:null,url:null,size:"100% 100%",repeat:"no-repeat"},l.stopped=!0,l.fullScreen1=o!==void 0&&o,l._cameraX=0,l._cameraY=0,Object.defineProperty(l,"cameraX",{get:function get(){return l._cameraX},set:function set(e){l.maxX=e+this.width/2,l.minX=e-this.width/2,l.mouseX+=e-l._cameraX,l._cameraX=e}}),Object.defineProperty(l,"cameraY",{get:function get(){return l._cameraY},set:function set(e){l.maxY=e+this.height/2,l.minY=e-this.height/2,l.mouseY+=e-l._cameraY,l._cameraY=e}}),Object.defineProperty(l,"fullScreen",{get:function get(){return l.fullScreen1},set:function set(e){l.fullScreen1=e}}),l.fullScreen1&&(p=window.innerWidth,a=window.innerHeight,window.addEventListener("load",function(){document.body.style.margin=0,document.body.style.padding=0})),l._readys=[],l.ready=function(e){if("function"!=typeof e)throw new TypeError("ready(function) requires one function input.");l.stopped?l._readys.push(e):e()},l._runReadys=function(){l.stopped=!1,l._readys.forEach(function(e){e()}),l._readys=[]},window.addEventListener("load",function(){document.documentElement.style.width="100%",document.documentElement.style.height="100%",document.body.style.width="100%",document.body.style.height="100%",l._mainDiv=document.createElement("div"),document.body.appendChild(l._mainDiv),l._mainDiv.id="project",l._mainDiv.style.position="relative",l._mainDiv.style.width="100%",l._mainDiv.style.height="100%",l._spriteCanvas=document.createElement("canvas"),l._mainDiv.appendChild(l._spriteCanvas),l._spriteCanvas.id="sprites",l._spriteCanvas.width=p,l._spriteCanvas.height=a,l._spriteCanvas.style.zIndex=3,l._spriteCanvas.style.position="absolute",l._penCanvas=document.createElement("canvas"),l._mainDiv.appendChild(l._penCanvas),l._penCanvas.id="pen",l._penCanvas.width=p,l._penCanvas.height=a,l._penCanvas.style.zIndex=2,l._penCanvas.style.position="absolute",l._backdropDiv=document.createElement("div"),l._mainDiv.appendChild(l._backdropDiv),l._backdropDiv.id="backdrop",l._backdropDiv.width=p,l._backdropDiv.height=a,l._backdropDiv.style.zIndex=1,l._backdropDiv.style.position="absolute",l._backdropDiv.style.width="100%",l._backdropDiv.style.height="100%",l._spriteContext=l._spriteCanvas.getContext("2d"),l._penContext=l._penCanvas.getContext("2d"),l._runReadys()}),l.setBackdropSize=function(e,t){if("number"!=typeof e||"number"!=typeof t)throw new TypeError("setBackdropSize(width, height) requires two number inputs.");if(l.fullScreen1)throw Error("You cannot manually set the backdrop size in full-screen mode. You can full-screen mode off with: fullScreen = false.");else l._setCanvasSize(e,t)},l._setCanvasSize=function(e,t){l.height=t,l.width=e,l.minX=l.cameraX-l.width/2,l.maxX=l.cameraX+l.width/2,l.minY=l.cameraY-l.height/2,l.maxY=l.cameraY+l.height/2,l.ready(function(){l._spriteCanvas.width=l.width,l._spriteCanvas.height=l.height;var n=l._penContext.getImageData(0,0,e,t);l._penCanvas.width=l.width,l._penCanvas.height=l.height,l._penContext.putImageData(n,0,0),l._backdropDiv.style.width=l.width,l._backdropDiv.style.height=l.height,setTimeout(l._renderBackdrop)})},l._setCanvasSize(p,a),window.addEventListener("resize",function(){l.fullScreen1&&l._setCanvasSize(window.innerWidth,window.innerHeight)}),l.bounds=function(){return{left:l.minX,right:l.maxX,bottom:l.minYm,top:l.maxY}},l.randomX=function(){if(0<arguments.length)throw new TypeError("randomX() requires no inputs.");return Woof.prototype.random(l.minX,l.maxX)},l.randomY=function(){if(0<arguments.length)throw new TypeError("randomY() requires no inputs.");return Woof.prototype.random(l.minY,l.maxY)},l._renderBackdrop=function(){var e=l.backdrop,t=e.size,n=e.type,o=e.url,r=e.color,a=e.repeat;l._backdropDiv.style.background="url"===n?"url('"+o+"')":r,l._backdropDiv.style.backgroundRepeat=a,l._backdropDiv.style.backgroundSize=t},l.setBackdropURL=function(e){if("string"!=typeof e)throw new TypeError("setBackDropUrl(url) requires one string input.");l.backdrop.url=e,l.backdrop.type="url";var t=new BrowserImage;t.onload=function(){l.ready(l._renderBackdrop)},t.onerror=function(){var t=new Error;throw t.type="ImageLoadError",t.url=e,t},t.src=e},l.setBackdropStyle=function(e){if(e=e.split(" "),2<e.length)throw Error("setBackdropStyle can take one or two arguments, separated by a space.");var t=[/^cover$/,/^contain$/,/^\d+em$/,/^\d+px$/,/^\d+%$/,/^auto$/];if(!e.every(function(e){return t.some(function(t){return e.match(t)})}))throw Error("setBackdropStyle only understands sizes such as 5em, 50px, 50% and the keywords cover, contain, and auto");l.backdrop.size=e.join(" "),l.ready(l._renderBackdrop)},l.setBackdropRepeat=function(e){var t=["repeat","no-repeat","repeat-x","repeat-y","space","round"];if(!t.includes(e))throw Error("setBackdropRepeat can only understand one of the following: "+t.join(", "));l.backdrop.repeat=e,l.ready(l._renderBackdrop)},l.setBackdropColor=function(e){if("string"!=typeof e)throw new TypeError("setBackdropColor(color) takes one string input.");l.backdrop.color=e,l.backdrop.type="color",l.ready(l._renderBackdrop)},l.freezing=!1,l.freeze=function(){if(0<arguments.length)throw new TypeError("freeze() requires no inputs.");l.freezing||l.stopped||(l.freezing=!0,l.after(10,"miliseconds",function(){l.stopped=!0,l.freezing=!1}))},l.defrost=function(){if(0<arguments.length)throw new TypeError("defrost() requires no inputs.");l.stopped=!1},l.translateToCenter=function(e,t){return[e-l.width/2+l.cameraX-l._spriteCanvas.offsetLeft,l.height/2-t+l.cameraY+l._spriteCanvas.offsetTop]},l.translateToCanvas=function(e,t){return[e+l.maxX-l._spriteCanvas.offsetLeft,l.maxY-t+l._spriteCanvas.offsetTop]},l.mouseDown=!1,l.mouseX=0,l.mouseY=0,l.pMouseX=0,l.pMouseY=0,l.mouseXSpeed=0,l.mouseYSpeed=0,l.keysDown=[],l.keysDown.oldIncludes=l.keysDown.includes,l.keysDown.includes=function(e){var t=e.toUpperCase();return"UP ARROW"===t?t="UP":"LEFT ARROW"===t?t="LEFT":"RIGHT ARROW"===t?t="RIGHT":"DOWN ARROW"===t?t="DOWN":"RETURN"===t?t="ENTER":"CONTROL"===t?t="CTRL":"OPTION"===t?t="ALT":"ESC"===t?t="ESCAPE":"SPACE BAR"===t||"SPACEBAR"===t?t="SPACE":"CAPS"===t?t="CAPS LOCK":"DEL"===t||"BACKSPACE"===t?t="DELETE":("CMD"==t||"WINDOWS"==t||"SEARCH"==t)&&(t="COMMAND"),this.oldIncludes(t)},l.ready(function(){l._spriteCanvas.addEventListener("mousedown",function(e){l.mouseDown=!0;var t=l.translateToCenter(e.clientX,e.clientY),n=_slicedToArray(t,2);l.mouseX=n[0],l.mouseY=n[1]}),window.addEventListener("mouseup",function(e){l.mouseDown=!1;var t=l.translateToCenter(e.clientX,e.clientY),n=_slicedToArray(t,2);l.mouseX=n[0],l.mouseY=n[1]}),l._spriteCanvas.addEventListener("touchstart",function(e){l.mouseDown=!0;var t=l.translateToCenter(e.targetTouches[0].clientX,e.targetTouches[0].clientY),n=_slicedToArray(t,2);l.mouseX=n[0],l.mouseY=n[1]}),l._spriteCanvas.addEventListener("touchend",function(){setTimeout(function(){l.mouseDown=!1},0)}),l._spriteCanvas.addEventListener("mousemove",function(e){var t=l.translateToCenter(e.clientX,e.clientY),n=_slicedToArray(t,2);l.mouseX=n[0],l.mouseY=n[1]}),l._spriteCanvas.addEventListener("touchmove",function(e){var t=l.translateToCenter(e.targetTouches[0].clientX,e.targetTouches[0].clientY),n=_slicedToArray(t,2);l.mouseX=n[0],l.mouseY=n[1],e.preventDefault()}),document.body.addEventListener("keydown",function(e){var t=Woof.prototype.keyCodeToString(e.keyCode);l.keysDown.includes(t)||l.keysDown.push(t)}),document.body.addEventListener("keyup",function(e){var t=Woof.prototype.keyCodeToString(e.keyCode);l.keysDown.includes(t)&&l.keysDown.splice(l.keysDown.indexOf(t),1)}),l._onMouseMoveHandler=function(e){var t=l.translateToCenter(e.clientX,e.clientY),n=_slicedToArray(t,2),o=n[0],r=n[1];l._onMouseMoves.forEach(function(e){e(o,r)})},l._spriteCanvas.addEventListener("mousemove",l._onMouseMoveHandler),l._onMouseDownHandler=function(e){var t=l.translateToCenter(e.clientX,e.clientY),n=_slicedToArray(t,2),o=n[0],r=n[1];l._onMouseDowns.forEach(function(e){e(o,r)})},l._spriteCanvas.addEventListener("mousedown",l._onMouseDownHandler),l._onMouseUpHandler=function(e){var t=l.translateToCenter(e.clientX,e.clientY),n=_slicedToArray(t,2),o=n[0],r=n[1];l._onMouseUps.forEach(function(e){e(o,r)})},l._spriteCanvas.addEventListener("mouseup",l._onMouseUpHandler),l._onKeyDownHandler=function(e){var t=Woof.prototype.keyCodeToString(e.keyCode);l._onKeyDowns.forEach(function(e){e(t)})},document.body.addEventListener("keydown",l._onKeyDownHandler),l._onKeyUpHandler=function(e){var t=Woof.prototype.keyCodeToString(e.keyCode);l._onKeyUps.forEach(function(e){e(t)})},document.body.addEventListener("keyup",l._onKeyUpHandler)}),l._onMouseMoves=[],l.onMouseMove=function(e){if("function"!=typeof e)throw new TypeError("onMouseMove(function) requires one function input.");l._onMouseMoves.push(e)},l._onMouseDowns=[],l.onMouseDown=function(e){if("function"!=typeof e)throw new TypeError("onMouseDown(function) requires one function input.");l._onMouseDowns.push(e)},l._onMouseUps=[],l.onMouseUp=function(e){if("function"!=typeof e)throw new TypeError("onMouseUp(function) requires one function input.");l._onMouseUps.push(e)},l._onKeyDowns=[],l.onKeyDown=function(e){if("function"!=typeof e)throw new TypeError("onKeyDown(function) requires one function input.");l._onKeyDowns.push(e)},l._onKeyUps=[],l.onKeyUp=function(e){if("function"!=typeof e)throw new TypeError("onKeyUp(function) requires one function input.");l._onKeyUps.push(e)},l._everys=[],l.every=function(e,t,n){if("function"!=typeof n||"number"!=typeof e&&"function"!=typeof e)throw new TypeError("every(time, units, function) requires a number/function, time unit and function input.");if("function"==typeof e){if("number"!=typeof e())throw new TypeError("every(time, units, function) requires a time function that returns a number");var o=function(r){var a=Woof.prototype.unitsToMiliseconds(e(),t);n(),r&&l._everys.includes(r)&&l._everys.splice(l._everys.indexOf(r),1);var s=setTimeout(function(){o(s)},a);l._everys.push(s)};o()}else{var r=Woof.prototype.unitsToMiliseconds(e,t);n(),l._everys.push(setInterval(n,r))}},l.forever=function(e){if("function"!=typeof e)throw new TypeError("forever(function) requires one function input.");l.repeatUntil(function(){return!1},e)},l.when=function(t,e){if("function"!=typeof e||"function"!=typeof t)throw new TypeError("when(conditionFunction, function) requires two function inputs.");l.forever(function(){var n;try{n=t()}catch(n){throw console.error("Bad condition in when(conditionFunction, function): "+t),n}n&&e()})},l._repeats=[],l.repeat=function(e,t,n){if("function"!=typeof t||"number"!=typeof e||n!==void 0&&"function"!=typeof n)throw new TypeError("repeat(times, function, afterFunction) requires a number and a function, and optionally accepts an extra function.");l._repeats.push(new Woof.prototype.Repeat(e,t,n))},l.repeatUntil=function(e,t,n){if("function"!=typeof t||"function"!=typeof e||n!==void 0&&"function"!=typeof n)throw new TypeError("repeatUntil(conditionFunction, function, afterFunction) requires two functions, and optionally accepts an extra function.");l._repeats.push(new Woof.prototype.RepeatUntil(e,t,n))},l._runRepeats=function(){l._repeats.forEach(function(e){e.next()}),l._repeats=l._repeats.filter(function(e){return!e.done})},l._afters=[],l.after=function(e,t,n){var o=Woof.prototype.unitsToMiliseconds(e,t);if("function"!=typeof n||"number"!=typeof e)throw new TypeError("after(time, units, function) requires a number, unit and function input.");l._afters.push(setTimeout(n,o))},l._renderSprites=function(){l._spriteContext.clearRect(0,0,l.width,l.height),l.sprites.forEach(function(e){e._render(l._spriteContext)})},l.clearPen=function(){if(0<arguments.length)throw new TypeError("clearPen() requires no inputs.");l._penContext.clearRect(0,0,l.width,l.height)},l._calculateMouseSpeed=function(){l.mouseXSpeed=l.mouseX-l.pMouseX,l.mouseYSpeed=l.mouseY-l.pMouseY;var e=[l.mouseX,l.mouseY];l.pMouseX=e[0],l.pMouseY=e[1]},l.woofEpoch=new Date,l.timer=function(){if(0<arguments.length)throw new TypeError("timer() requires no inputs.");var e=new Date;return(e-l.woofEpoch)/1e3},l.resetTimer=function(){if(0<arguments.length)throw new TypeError("resetTimer() requires no inputs.");l.woofEpoch=new Date},l._render=function(){l._runRepeats(),l._calculateMouseSpeed(),l.renderInterval=window.requestAnimationFrame(l._render);l.stopped||l._renderSprites()},l.ready(l._render)}Woof.prototype.Sprite=function(){var e=Math.atan2,t=Math.max,n=Math.min,o=Math.PI,r=Math.sqrt,a=Math.pow,s=Math.round,p=Math.sin,l=Math.cos,u=this,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=d.project,h=void 0===c?void 0:c,g=d.x,m=void 0===g?0:g,f=d.y,b=void 0===f?0:f,y=d.angle,v=void 0===y?0:y,_=d.rotationStyle,w=void 0===_?"ROTATE":_,C=d.showing,x=d.penColor,T=void 0===x?"black":x,S=d.penWidth,k=void 0===S?1:S,E=d.penDown,D=d.showCollider,P=d.brightness,j=void 0===P?100:P;if(!!h)this.project=h.global?window:h;else if(global)this.project=window;else throw new TypeError("When not in global mode, you must supply your {project: project} to each Sprite.");this.project.sprites.push(this),Object.defineProperty(this,"x",{get:function get(){return this.privateX},set:function set(e){if("number"!=typeof e)throw new TypeError("sprite.x can only be set to a number.");this.privateX=e,this.project.ready(this.trackPen)}}),Object.defineProperty(this,"y",{get:function get(){return this.privateY},set:function set(e){if("number"!=typeof e)throw new TypeError("sprite.y can only be set to a number.");this.privateY=e,this.project.ready(this.trackPen)}}),this.privateX=m,this.privateY=b,this.angle=v,this.rotationStyle=w,this.showing=!(C!==void 0)||C,this._penDown=E!==void 0&&E,this.penColor=T,this.penWidth=k,this.deleted=!1,this.showCollider=D!==void 0&&D,this.brightness=j,this.toJSON=function(){return{x:u.x,y:u.y,angle:u.angle,rotationStyle:u.rotationStyle,showing:u.showing,penDown:u._penDown,penColor:u.penColor,penWidth:u.penWidth,deleted:u.deleted}};var Y=[this.x,this.y];this.lastX=Y[0],this.lastY=Y[1],this.trackPen=function(){if(u._penDown&&(u.lastX!=u.x||u.lastY!=u.y)){var e,t;u.project._penContext.save(),u.project._penContext.beginPath(),(e=u.project._penContext).moveTo.apply(e,_toConsumableArray(u.project.translateToCanvas(u.lastX,u.lastY))),(t=u.project._penContext).lineTo.apply(t,_toConsumableArray(u.project.translateToCanvas(u.x,u.y))),u.project._penContext.lineCap="round",u.project._penContext.strokeStyle=u.penColor,u.project._penContext.lineWidth=u.penWidth,u.project._penContext.stroke(),u.project._penContext.restore()}var n=[u.x,u.y];u.lastX=n[0],u.lastY=n[1]},this.rotatedVector=function(e,t){var n,o;return"line"==this.type?(n=l(this.radians())*(e-this.x)-p(this.radians())*(t-this.y+this.height/2)+this.x,o=p(this.radians())*(e-this.x)+l(this.radians())*(t-this.y+this.height/2)+this.y):(n=l(this.radians())*(e-this.x)-p(this.radians())*(t-this.y)+this.x,o=p(this.radians())*(e-this.x)+l(this.radians())*(t-this.y)+this.y),new SAT.Vector(n,o)},this.translatedVector=function(e,t){return new SAT.Vector(t.x-e.x,t.y-e.y)},this.collider=function(){var e=this.rotatedVector(this.x-this.width/2,this.y-this.height/2),t=new SAT.Vector(0,0),n=this.translatedVector(e,this.rotatedVector(this.x+this.width/2,this.y-this.height/2)),o=this.translatedVector(e,this.rotatedVector(this.x+this.width/2,this.y+this.height/2)),r=this.translatedVector(e,this.rotatedVector(this.x-this.width/2,this.y+this.height/2));return new SAT.Polygon(e,[t,n,o,r])},this._renderCollider=function(e){var t=this.collider();e.save(),e.beginPath(),e.moveTo.apply(e,_toConsumableArray(this.project.translateToCanvas(t.calcPoints[0].x+t.pos.x,t.calcPoints[0].y+t.pos.y))),e.lineTo.apply(e,_toConsumableArray(this.project.translateToCanvas(t.calcPoints[1].x+t.pos.x,t.calcPoints[1].y+t.pos.y))),e.lineTo.apply(e,_toConsumableArray(this.project.translateToCanvas(t.calcPoints[2].x+t.pos.x,t.calcPoints[2].y+t.pos.y))),e.lineTo.apply(e,_toConsumableArray(this.project.translateToCanvas(t.calcPoints[3].x+t.pos.x,t.calcPoints[3].y+t.pos.y))),e.lineTo.apply(e,_toConsumableArray(this.project.translateToCanvas(t.calcPoints[0].x+t.pos.x,t.calcPoints[0].y+t.pos.y))),e.strokeStyle="green",e.lineWidth=4,e.stroke(),e.restore()},this._render=function(e){this.showing&&!this.deleted&&this.overlap(this.project.bounds())&&(this.showCollider&&this._renderCollider(e),e.save(),e.translate(s(this.canvasX()),s(this.canvasY())),e.globalAlpha=this.brightness/100,"ROTATE"==this.rotationStyle?e.rotate(-this.radians()):"NO ROTATE"==this.rotationStyle||"ROTATE LEFT RIGHT"==this.rotationStyle&&(90<=this.angle%360&&270>this.angle%360?e.scale(-1,1):0<=this.angle%360&&90>this.angle%360||360>=this.angle%360&&270<=this.angle%360),this.render(e),e.restore())},this.distanceTo=function(e,t){if(1===arguments.length){if("object"==("undefined"==typeof e?"undefined":_typeof(e))){var n=this.x-e.x,o=this.y-e.y;return r(a(n,2)+a(o,2))}throw new TypeError("distanceTo(sprite) requires one sprite input.")}else if("number"!=typeof e||"number"!=typeof t)throw new TypeError("distanceTo(x,y) requires two number inputs.");else{var n=this.x-e,o=this.y-t;return r(a(n,2)+a(o,2))}},this.move=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1;if("number"!=typeof e)throw new TypeError("move(steps) requires one number input.");this.privateX+=e*l(this.radians()),this.privateY+=e*p(this.radians()),this.project.ready(this.trackPen)},this.setRotationStyle=function(e){if("ROTATE"==e)u.rotationStyle="ROTATE";else if("NO ROTATE"==e)u.rotationStyle="NO ROTATE";else if("ROTATE LEFT RIGHT"==e)u.rotationStyle="ROTATE LEFT RIGHT";else throw TypeError("Unrecognized rotation style: "+e)},this.radians=function(){return u.angle*o/180},this.canvasX=function(){return u.x-u.project.cameraX+u.project.width/2},this.canvasY=function(){return u.project.height/2-(u.y-u.project.cameraY)},this.bounds=function(){var e=u.width/2,t=u.height/2,n=u.x-e,o=u.x+e,r=u.y-t,a=u.y+t;return{left:n,right:o,top:a,bottom:r}},this.collisionCanvas=document.createElement("canvas"),this.collisionContext=this.collisionCanvas.getContext("2d"),this.touching=function(e,o){if("object"!=("undefined"==typeof e?"undefined":_typeof(e)))throw new TypeError("touching(sprite) requires one sprite input.");if(u.deleted||!u.showing)return!1;if(e.deleted||!e.showing)return!1;if(!detectCollision(u.collider(),e.collider()))return!1;if(!o)return!0;var r=u.bounds(),a=e.bounds(),s=n(r.left,a.left),p=t(r.top,a.top),l=t(r.right,a.right),d=n(r.bottom,a.bottom);u.collisionCanvas.width=u.project.width,u.collisionCanvas.height=u.project.height,u._render(u.collisionContext),u.collisionContext.globalCompositeOperation="source-in",e._render(u.collisionContext);var c=u.project.translateToCanvas(s,p),y=_slicedToArray(c,2),h=y[0],g=y[1];try{var m=u.collisionContext.getImageData(h,g,l-s,p-d).data}catch(t){if(t instanceof DOMException)return console.warn("You have an image at an untrusted URL. Consider uploading to Imgur and using https."),!0}for(var f=0;f<4*((l-s)*(p-d));f+=4)if(m[f+3])return!0;return!1},this.overlap=function(e){var t=e.left,n=e.right,o=e.top,r=e.bottom,a=u.bounds();return!(t>a.right||n<a.left||o<a.bottom||r>a.top)},this.over=function(e,t){if("number"!=typeof e||"number"!=typeof t)throw new TypeError("over(x, y) requires two number inputs.");if(u.deleted||!u.showing)return!1;var n=u.bounds(),o=t<=n.top,r=t>=n.bottom,a=e>=n.left,s=e<=n.right;return o&&r&&a&&s},Object.defineProperty(this,"mouseOver",{get:function get(){return!this.deleted&&this.showing&&this.over(this.project.mouseX,this.project.mouseY)}}),Object.defineProperty(this,"mouseDown",{get:function get(){return!this.deleted&&this.showing&&this.mouseOver&&this.project.mouseDown}}),this.turnLeft=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1;if("number"!=typeof e)throw new TypeError("turnLeft(degrees) requires one number input.");u.angle+=e},this.turnRight=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1;if("number"!=typeof e)throw new TypeError("turnRight(degrees) requires one number input.");u.angle-=e},this.sendToBack=function(){if(0<arguments.length)throw new TypeError("sendToBack() requires no inputs.");var e=this.project.sprites;e.splice(0,0,e.splice(e.indexOf(this),1)[0])},this.sendToFront=function(){if(0<arguments.length)throw new TypeError("sendToFront() requires no inputs.");var e=this.project.sprites;e.splice(e.length,0,e.splice(e.indexOf(this),1)[0])},Object.defineProperty(this,"penDown",{get:function get(){return function(){u._penDown=!0}},set:function set(e){u._penDown=e}}),this.penUp=function(){u._penDown=!1},this.show=function(){u.showing=!0},this.hide=function(){u.showing=!1},this.pointTowards=function(t,n){if(1===arguments.length){if("object"==("undefined"==typeof t?"undefined":_typeof(t)))this.angle=180*e(t.y-this.y,t.x-this.x)/o;else throw new TypeError("pointTowards(sprite) requires one sprite input.");}else if("number"!=typeof t||"number"!=typeof n)throw new TypeError("pointTowards(x, y) requires two number inputs.");else this.angle=180*e(n-this.y,t-this.x)/o},this._onMouseDowns=[],this.onMouseDown=function(e){if("function"!=typeof e)throw new TypeError("onMouseDown(function) requires one function input.");u._onMouseDowns.push(e)},this._onMouseDownHandler=function(e){var t=u.project.translateToCenter(e.clientX,e.clientY),n=_slicedToArray(t,2),o=n[0],r=n[1];u.showing&&u.over(o,r)&&u._onMouseDowns.forEach(function(e){e(o,r)})},this._onMouseUps=[],this.onMouseUp=function(e){if("function"!=typeof e)throw new TypeError("onMouseUp(function) requires one function input.");u._onMouseUps.push(e)},this._onMouseUpHandler=function(e){var t=u.project.translateToCenter(e.clientX,e.clientY),n=_slicedToArray(t,2),o=n[0],r=n[1];u.showing&&u.over(o,r)&&u._onMouseUps.forEach(function(e){e(o,r)})},this.project.ready(function(){u.project._spriteCanvas.addEventListener("mousedown",u._onMouseDownHandler),u.project._spriteCanvas.addEventListener("mouseup",u._onMouseUpHandler)}),this.delete=function(){if(0<arguments.length)throw new TypeError("delete() requires no inputs.");this.deleted||(this.showing=!1,this.deleted=!0,this.project.sprites.includes(this)&&(this.project.sprites.splice(this.project.sprites.indexOf(this),1),this.project._spriteCanvas.removeEventListener("mousedown",this._onClickHandler)))}},Woof.prototype.Text=function(){var e=this,t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},n=t.project,o=n===void 0?void 0:n,r=t.text,a=r===void 0?"Text":r,s=t.size,p=s===void 0?12:s,l=t.color,u=l===void 0?"black":l,d=t.fontFamily,c=d===void 0?"arial":d,y=t.textAlign,h=y===void 0?"center":y;this.type="text",Woof.prototype.Sprite.call(this,arguments[0]),this.text=a,this.size=Math.abs(p),this.color=u,this.fontFamily=c,this.textAlign=h,Object.defineProperty(this,"width",{get:function get(){var e,t=this;return this._applyInContext(function(){e=t.project._spriteContext.measureText(t.textEval()).width}),e},set:function set(){throw new TypeError("You cannot modify the width of Text. You can only change its size.")}}),Object.defineProperty(this,"height",{get:function get(){var e,t=this;return this._applyInContext(function(){e=t.project._spriteContext.measureText("M").width}),e},set:function set(){throw new TypeError("You cannot modify the height of Text. You can only change its size.")}}),this._applyInContext=function(t){e.project._spriteContext.save(),e.project._spriteContext.font=e.size+"px "+e.fontFamily,e.project._spriteContext.fillStyle=e.color,e.project._spriteContext.textAlign=e.textAlign,t(),e.project._spriteContext.restore()},this.textEval=function(){if("function"==typeof e.text)try{return e.text()}catch(t){console.error("Error with text function: "+t.message)}else return e.text},this.render=function(t){e._applyInContext(function(){t.fillText(e.textEval(),0,e.height/2)})}},Woof.prototype.Circle=function(){var e=this,t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},n=t.project,o=n===void 0?void 0:n,r=t.radius,a=r===void 0?10:r,s=t.color,p=s===void 0?"black":s;this.type="circle",Woof.prototype.Sprite.call(this,arguments[0]),this.radius=Math.abs(a),this.color=p,Object.defineProperty(this,"width",{get:function get(){return 2*this.radius},set:function set(){throw new TypeError("You cannot modify the width of Circle. You can only change its radius.")}}),Object.defineProperty(this,"height",{get:function get(){return 2*this.radius},set:function set(){throw new TypeError("You cannot modify the height of Circle. You can only change its radius.")}}),this.render=function(t){t.beginPath(),t.arc(0,0,e.radius,0,2*Math.PI),t.fillStyle=e.color,t.fill()}},Woof.prototype.Rectangle=function(){var e=Math.abs,t=this,n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},o=n.project,r=o===void 0?void 0:o,a=n.height,s=a===void 0?10:a,p=n.width,l=p===void 0?10:p,u=n.color,d=u===void 0?"black":u;this.type="rectangle",Woof.prototype.Sprite.call(this,arguments[0]),this.rectangleHeight=e(s),this.rectangleWidth=e(l),this.color=d,Object.defineProperty(this,"width",{get:function get(){return this.rectangleWidth},set:function set(e){if("number"!=typeof e)throw new TypeError("rectangle.width can only be set to a number.");this.rectangleWidth=e}}),Object.defineProperty(this,"height",{get:function get(){return this.rectangleHeight},set:function set(e){if("number"!=typeof e)throw new TypeError("rectangle.height can only be set to a number.");this.rectangleHeight=e}}),this.render=function(e){e.fillStyle=t.color,e.fillRect(-t.width/2,-t.height/2,t.width,t.height)}},Woof.prototype.Oval=function(){var e=Math.abs,t=this,n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},o=n.project,r=o===void 0?void 0:o,a=n.height,s=a===void 0?50:a,p=n.width,l=p===void 0?20:p,u=n.color,d=u===void 0?"green":u;this.type="oval",Woof.prototype.Sprite.call(this,arguments[0]),this.ovalHeight=e(s),this.ovalWidth=e(l),this.color=d,Object.defineProperty(this,"width",{get:function get(){return this.ovalWidth},set:function set(e){if("number"!=typeof e)throw new TypeError("oval.width can only be set to a number.");this.ovalWidth=e}}),Object.defineProperty(this,"height",{get:function get(){return this.ovalHeight},set:function set(e){if("number"!=typeof e)throw new TypeError("oval.height can only be set to a number.");this.ovalHeight=e}}),this.render=function(e){e.fillStyle=t.color,e.beginPath(),e.ellipse(0,0,l/2,s/2,0,0,2*Math.PI),e.fill()}},Woof.prototype.Polygon=function(){var e=Math.abs,t=Math.PI,n=this,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=o.project,a=void 0===r?void 0:r,s=o.sides,p=void 0===s?3:s,l=o.length,u=void 0===l?100:l,d=o.color,c=void 0===d?"black":d;this.type="polygon",Woof.prototype.Sprite.call(this,arguments[0]),this.polygonSides=e(p),this.polygonLength=e(u),this.color=c,Object.defineProperty(this,"sides",{get:function get(){return this.polygonSides},set:function set(e){if("number"!=typeof e||3>e)throw new TypeError("polygon.sides can only be set to a number that is greater than or equal to 3.");this.polygonSides=p}}),Object.defineProperty(this,"length",{get:function get(){return this.polygonLength},set:function set(e){if("number"!=typeof e)throw new TypeError("polygon.length can only be set to a number.");this.polygonLength=e}}),this.collider=function(){var e=this.rotatedVector(this.x-this.length,this.y-this.length),t=new SAT.Vector(0,0),n=this.translatedVector(e,this.rotatedVector(this.x+this.length,this.y-this.length)),o=this.translatedVector(e,this.rotatedVector(this.x+this.length,this.y+this.length)),r=this.translatedVector(e,this.rotatedVector(this.x-this.length,this.y+this.length));return new SAT.Polygon(e,[t,n,o,r])},this.render=function(e){for(e.fillStyle=n.color,e.beginPath(),e.moveTo(1*u,0*u),i=1;i<p;i++)e.lineTo(u*Math.cos(i*(2*t/p)),u*Math.sin(i*(2*t/p)));e.fill()}},Woof.prototype.Line=function(){var e=Math.PI,t=Math.pow,n=this,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=o.project,a=void 0===r?void 0:r,s=o.width,p=void 0===s?1:s,l=o.x1,u=void 0===l?10:l,d=o.y1,c=void 0===d?10:d,y=o.color,h=void 0===y?"black":y;this.type="line",Woof.prototype.Sprite.call(this,arguments[0]),this.x1=u,this.y1=c,this.color=h,this.lineWidth=Math.abs(p),Object.defineProperty(this,"width",{get:function get(){return this.lineWidth},set:function set(e){if("number"!=typeof e)throw new TypeError("line.width can only be set to a number.");this.lineWidth=e}}),Object.defineProperty(this,"height",{get:function get(){return Math.sqrt(t(this.x-this.x1,2)+t(this.y-this.y1,2))},set:function set(){throw new TypeError("You cannot set line.height directly. You can only modify line.height by changing the length of your line through moving its points.")}}),Object.defineProperty(this,"angle",{get:function get(){return 180*Math.atan2(-this.x1+this.x,this.y1-this.y)/e+90},set:function set(){throw new TypeError("You cannot set line.angle directly. You can only modify line.angle by changing the position of the line's points.")}}),this.move=function(){throw new TypeError("You cannot move lines with move() unfortunately! Change the x, y, x1, and y1 values instead.")},this.radians=function(){return(this.angle-90)*e/180},this.render=function(e){e.fillStyle=n.color,e.fillRect(-n.width/2,-n.height,n.width,n.height)}},Woof.prototype.Image=function(){var e=Math.abs,t=this,n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},o=n.project,r=o===void 0?void 0:o,a=n.url,s=a===void 0?"./images/SMJjVCL.png":a,p=n.height,l=n.width;this.type="image",Woof.prototype.Sprite.call(this,arguments[0]),this.imageHeight=e(p),this.imageWidth=e(l),this.setImageURL=function(e){this.image=new window.BrowserImage,this.image.src=e,this.image.onerror=function(){var t=new Error;throw t.type="ImageLoadError",t.url=e,t}},this.setImageURL(s),Object.defineProperty(this,"width",{get:function get(){return this.imageWidth||this.image.width},set:function set(e){if("number"!=typeof e)throw new TypeError("image.width can only be set to a number.");this.imageWidth=e}}),Object.defineProperty(this,"height",{get:function get(){return this.imageHeight||this.image.height},set:function set(e){if("number"!=typeof e)throw new TypeError("image.width can only be set to a number.");this.imageHeight=e}}),this.render=function(e){t.image.complete&&0!==t.image.naturalHeight&&e.drawImage(t.image,-t.width/2,-t.height/2,t.width,t.height)}},Woof.prototype.Sound=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},t=e.url,n=t===void 0?"":t,o=e.loop,r=o===void 0?"false":o,a=e.volume,s=a===void 0?"normal":a,p=e.speed,l=p===void 0?"normal":p;this.audio=new Audio(n),this.audio.loop=r,this.audioSettings={speed:{slow:.5,normal:1,fast:2},volume:{mute:0,low:.5,normal:1}};var u=function(e){if("number"==typeof e){if(0<=e&&1>=e)return e;throw Error("Volume can only be set to a number value between 0 and 1.")}else if("string"==typeof e){if("mute"==e)return 0;if("low"==e)return .5;if("normal"==e)return 1;throw Error("Volume can only be set to a string value of \"mute\", \"low\", or \"normal\".")}else throw Error(e+" is not an accepted value for volume.")},d=function(e){if("number"==typeof e){if(.5<=e&&2>=e)return e;throw Error("Speed can only be set to a number value between 0.5 and 2.")}else if("string"==typeof e){if("slow"==e)return .5;if("normal"==e)return 1;if("fast"==e)return 2;throw Error("Speed can only be set to a string value of \"slow\", \"normal\", or \"fast\".")}else throw Error(e+" is not an accepted value for speed.")};this.audio.playbackRate=d(l),this.audio.volume=u(s),Object.defineProperty(this,"speed",{get:function get(){return this.audio.playbackRate},set:function set(e){this.audio.playbackRate=d(e)}}),Object.defineProperty(this,"volume",{get:function get(){return this.audio.volume},set:function set(e){this.audio.volume=u(e)}}),Object.defineProperty(this,"loop",{get:function get(){return this.audio.loop},set:function set(e){if("boolean"!=typeof e)throw new Error("Loop must be set to true or false.");this.audio.loop=e}}),this.startPlaying=function(){this.audio.play()},this.stopPlaying=function(){this.audio.pause()},this.neverPlayed=function(){return 0===this.audio.played.length}},Woof.prototype.customSprite=function(e){if(!e.render)throw new TypeError("customSprites must contain a render function");return function(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},n=t.project,o=n===void 0?void 0:n;Woof.prototype.Sprite.call(this,arguments[0]),Woof.prototype.extend(this,e)}},Woof.prototype.Repeat=function(e,t,n){var o=this;this.func=t,this.times=e,this.done=!1,this.next=function(){return o.done?void 0:0>=o.times?(o.done=!0,void(n&&n())):void(o.func(),o.times--)}},Woof.prototype.RepeatUntil=function(e,t,n){var o=this;this.func=t,this.condition=e,this.done=!1,this.next=function(){if(!o.done){var e;try{e=o.condition()}catch(t){throw console.error("Error in Repeat Until condition"),t}return e?(o.done=!0,void(n&&n())):void o.func()}}},Woof.prototype.keyCodeToString=function(e){return 38==e?"UP":37==e?"LEFT":39==e?"RIGHT":40==e?"DOWN":9==e?"TAB":13==e?"ENTER":16==e?"SHIFT":17==e?"CTRL":18==e?"ALT":27==e?"ESCAPE":32==e?"SPACE":192==e?"`":186==e?";":222==e?"'":189==e?"-":187==e?"=":219==e?"[":220==e?"\\":191==e?"/":190==e?".":188==e?",":20==e?"CAPS LOCK":8==e?"DELETE":91==e?"COMMAND":65<=e&&90>=e||48<=e&&57>=e?String.fromCharCode(e):e.toString()},Woof.prototype.unitsToMiliseconds=function(e,t){if("milliseconds"==t||"millisecond"==t)return e;if("miliseconds"==t||"milisecond"==t)return e;if("seconds"==t||"second"==t)return 1e3*e;if("minutes"==t||"minute"==t)return 60*(1e3*e);throw TypeError("Unrecognized Time")},Woof.prototype.random=function(e,t){var n=Math.max,o=Math.pow;if("number"!=typeof e||"number"!=typeof t)throw new TypeError("random(a, b) requires two number inputs.");var r=Math.min(e,t),a=n(e,t),s=Math.random()*(a-r)+r,p=function(e){return 0==e%1?0:e.toString().split(".")[1].length},l=n(p(a),p(r));return Math.round(s*o(10,l))/o(10,l)},Woof.prototype.dayOfMonth=function(){if(0<arguments.length)throw new TypeError("dayOfMonth() requires no inputs.");var e=new Date;return e.getDate()},Woof.prototype.dayOfWeek=function(){if(0<arguments.length)throw new TypeError("dayOfWeek() requires no inputs.");var e=new Date,t=e.getDay();if(0===t)return"Sunday";return 1==t?"Monday":2==t?"Tuesday":3==t?"Wednesday":4==t?"Thursday":5==t?"Friday":6==t?"Saturday":void 0},Woof.prototype.hourMilitary=function(){if(0<arguments.length)throw new TypeError("hourMilitary() requires no inputs.");var e=new Date;return e.getHours()},Woof.prototype.hour=function(){if(0<arguments.length)throw new TypeError("hour() requires no inputs.");var e=new Date,t=e.getHours();return 12>=t?t:t-12},Woof.prototype.minute=function(){if(0<arguments.length)throw new TypeError("minute() requires no inputs.");var e=new Date;return e.getMinutes()},Woof.prototype.year=function(){if(0<arguments.length)throw new TypeError("year() requires no inputs.");var e=new Date;return e.getFullYear()},Woof.prototype.months=["January","February","March","April","May","June","July","August","September","October","November","December"],Woof.prototype.month=function(){if(0<arguments.length)throw new TypeError("month() requires no inputs.");return Woof.prototype.months[new Date().getMonth()]},Woof.prototype.second=function(){if(0<arguments.length)throw new TypeError("second() requires no inputs.");var e=new Date;return e.getSeconds()},Woof.prototype.randomColor=function(){if(0<arguments.length)throw new TypeError("randomColor() requires no inputs.");return"rgb("+Woof.prototype.random(0,255)+", "+Woof.prototype.random(0,255)+", "+Woof.prototype.random(0,255)+")"},Woof.prototype.RIGHT=0,Woof.prototype.LEFT=180,Woof.prototype.UP=90,Woof.prototype.DOWN=270,Number.prototype.between=function(e,t){if("number"!=typeof e||"number"!=typeof t)throw new TypeError("between(a, b) requires two number inputs.");var n=Math.min.apply(Math,[e,t]),o=Math.max.apply(Math,[e,t]);return this>n&&this<o},Array.prototype.remove=function(e){for(var t=this.length;t--;)this[t]===e&&this.splice(t,1)};function throttle(e,t){if("function"!=typeof e||"number"!=typeof t)throw new TypeError("throttle(function, limit) requires one function input and one number.");var n=!1;return function(){var o=this,r=arguments;n||(e.apply(o,r),n=!0,setTimeout(function(){n=!1},t))}}Woof.prototype.rgb=function(e,t,n){return"rgb("+e+", "+t+", "+n+")"},Woof.prototype.extend=function(e,t){for(var n in t)e[n]=t[n];return e},Woof.prototype.importCodeURL=function(e,t){var n=document.createElement("script");n.type="text/javascript",n.src=e,n.onload=t,document.body.appendChild(n)},Woof.prototype.mobile=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")},Woof.prototype.range=function(e,t){var n=Math.abs,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(2>arguments.length||"number"!=typeof e||"number"!=typeof t||"number"!=typeof o)throw new TypeError("range() requires at least two number inputs.");if(0===o)throw new TypeError("the third parameter for range() cannot be 0");var r=[];if(e<t){o=n(o);for(var a=e;a<t;a+=o)r.push(a)}else if(e>t){o=-n(o);for(var s=e;s>t;s+=o)r.push(s)}return r},Woof.prototype.sqrt=function(e){if("number"!=typeof e)throw new TypeError("sqrt(a) requires one number input.");return Math.sqrt(e)},Woof.prototype.abs=function(e){if("number"!=typeof e)throw new TypeError("abs(a) requires one number input.");return Math.abs(e)},Woof.prototype.floor=function(e){if("number"!=typeof e)throw new TypeError("floor(a) requires one number input.");return Math.floor(e)},Woof.prototype.ceiling=function(e){if("number"!=typeof e)throw new TypeError("ceiling(a) requires one number input.");return Math.ceil(e)},Woof.prototype.sin=function(e){if("number"!=typeof e)throw new TypeError("sin(a) requires one number input.");return Math.sin(e*(Math.PI/180))},Woof.prototype.cos=function(e){if("number"!=typeof e)throw new TypeError("cos(a) requires one number input.");return Math.cos(e*(Math.PI/180))},Woof.prototype.tan=function(e){if("number"!=typeof e)throw new TypeError("tan(a) requires one number input.");return Math.tan(e*(Math.PI/180))},Woof.prototype.asin=function(e){if("number"!=typeof e)throw new TypeError("asin(a) requires one number input.");return Math.asin(e)*(180/Math.PI)},Woof.prototype.acos=function(e){if("number"!=typeof e)throw new TypeError("acos(a) requires one number input.");return Math.acos(e)*(180/Math.PI)},Woof.prototype.atan=function(e){if("number"!=typeof e)throw new TypeError("atan(a) requires one number input.");return Math.atan(e)*(180/Math.PI)},Woof.prototype.ln=function(e){if("number"!=typeof e)throw new TypeError("ln(a) requires one number input.");return Math.log(e)},Woof.prototype.log=function(e){if("number"!=typeof e)throw new TypeError("log(a) requires one number input.");return Math.log(e)/2.302585092994046},Woof.prototype.pow=function(e,t){if("number"!=typeof e||"number"!=typeof t)throw new TypeError("pow(a,b) requires two number inputs.");return Math.pow(e,t)};var getData=function(e,t){fetch(e,{mode:"cors",header:{"Access-Control-Allow-Origin":"*"}}).then(function(e){e.json().then(function(e){t(e)})})},currentScript=document.currentScript||Array.prototype.slice.call(document.getElementsByTagName("script")).find(function(e){return e.src.includes("woof.js")});!1!==JSON.parse(currentScript.getAttribute("global"))&&Woof.prototype.extend(window,new Woof({global:!0,fullScreen:!0}));
'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a};(function(a,b){'use strict';'function'==typeof define&&define.amd?define(b):'object'===('undefined'==typeof exports?'undefined':_typeof(exports))?module.exports=b():a.SAT=b()})(void 0,function(){'use strict';function b(a,b){this.x=a||0,this.y=b||0}function a(a,c){this.pos=a||new b,this.r=c||0}function c(a,c){this.pos=a||new b,this.angle=0,this.offset=new b,this.setPoints(c||[])}function d(a,c,d){this.pos=a||new b,this.w=c||0,this.h=d||0}function e(){this.a=null,this.b=null,this.overlapN=new b,this.overlapV=new b,this.clear()}function f(a,b,c){for(var d,e=m,f=-m,g=a.length,h=0;h<g;h++)d=a[h].dot(b),d<e&&(e=d),d>f&&(f=d);c[0]=e,c[1]=f}function g(a,b,c,d,e,g){var h=i.pop(),j=i.pop(),k=q.pop().copy(b).sub(a),m=k.dot(e);if(f(c,e,h),f(d,e,j),j[0]+=m,j[1]+=m,h[0]>j[1]||j[0]>h[1])return q.push(k),i.push(h),i.push(j),!0;if(g){var n=0;if(h[0]<j[0]){if(g.aInB=!1,h[1]<j[1])n=h[1]-j[0],g.bInA=!1;else{var o=h[1]-j[0],p=j[1]-h[0];n=o<p?o:-p}}else if(g.bInA=!1,h[1]>j[1])n=h[0]-j[1],g.aInB=!1;else{var o=h[1]-j[0],p=j[1]-h[0];n=o<p?o:-p}var r=l(n);r<g.overlap&&(g.overlap=r,g.overlapN.copy(e),0>n&&g.overlapN.reverse())}return q.push(k),i.push(h),i.push(j),!1}function h(a,b){var c=a.len2(),d=b.dot(a);return 0>d?t:d>c?v:u}function j(a,b,c){for(var d=q.pop().copy(b.pos).sub(a.pos),e=b.r,f=a.calcPoints,g=f.length,j=q.pop(),k=q.pop(),m=0;m<g;m++){var i=m===g-1?0:m+1,n=0===m?g-1:m-1,o=0,p=null;j.copy(a.edges[m]),k.copy(d).sub(f[m]),c&&k.len2()>e*e&&(c.aInB=!1);var r=h(j,k);if(-1===r){j.copy(a.edges[n]);var s=q.pop().copy(d).sub(f[n]);if(r=h(j,s),1===r){var t=k.len();if(t>e)return q.push(d),q.push(j),q.push(k),q.push(s),!1;c&&(c.bInA=!1,p=k.normalize(),o=e-t)}q.push(s)}else if(1!==r){var u=j.perp().normalize(),t=k.dot(u),v=l(t);if(0<t&&v>e)return q.push(d),q.push(u),q.push(k),!1;c&&(p=u,o=e-t,(0<=t||o<2*e)&&(c.bInA=!1))}else if(j.copy(a.edges[i]),k.copy(d).sub(f[i]),r=h(j,k),-1===r){var t=k.len();if(t>e)return q.push(d),q.push(j),q.push(k),!1;c&&(c.bInA=!1,p=k.normalize(),o=e-t)}p&&c&&l(o)<l(c.overlap)&&(c.overlap=o,c.overlapN.copy(p))}return c&&(c.a=a,c.b=b,c.overlapV.copy(c.overlapN).scale(c.overlap)),q.push(d),q.push(j),q.push(k),!0}function k(c,a,b){for(var d=c.calcPoints,e=d.length,f=a.calcPoints,h=f.length,j=0;j<e;j++)if(g(c.pos,a.pos,d,f,c.normals[j],b))return!1;for(var j=0;j<h;j++)if(g(c.pos,a.pos,d,f,a.normals[j],b))return!1;return b&&(b.a=c,b.b=a,b.overlapV.copy(b.overlapN).scale(b.overlap)),!0}var l=Math.abs,m=Number.MAX_VALUE,n=Math.sqrt,o={};o.Vector=b,o.V=b,b.prototype.copy=b.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this},b.prototype.clone=b.prototype.clone=function(){return new b(this.x,this.y)},b.prototype.perp=b.prototype.perp=function(){var a=this.x;return this.x=this.y,this.y=-a,this},b.prototype.rotate=b.prototype.rotate=function(a){var b=Math.sin,c=Math.cos,d=this.x,e=this.y;return this.x=d*c(a)-e*b(a),this.y=d*b(a)+e*c(a),this},b.prototype.reverse=b.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},b.prototype.normalize=b.prototype.normalize=function(){var a=this.len();return 0<a&&(this.x/=a,this.y/=a),this},b.prototype.add=b.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this},b.prototype.sub=b.prototype.sub=function(a){return this.x-=a.x,this.y-=a.y,this},b.prototype.scale=b.prototype.scale=function(a,b){return this.x*=a,this.y*=b||a,this},b.prototype.project=b.prototype.project=function(a){var b=this.dot(a)/a.len2();return this.x=b*a.x,this.y=b*a.y,this},b.prototype.projectN=b.prototype.projectN=function(a){var b=this.dot(a);return this.x=b*a.x,this.y=b*a.y,this},b.prototype.reflect=b.prototype.reflect=function(a){var b=this.x,c=this.y;return this.project(a).scale(2),this.x-=b,this.y-=c,this},b.prototype.reflectN=b.prototype.reflectN=function(a){var b=this.x,c=this.y;return this.projectN(a).scale(2),this.x-=b,this.y-=c,this},b.prototype.dot=b.prototype.dot=function(a){return this.x*a.x+this.y*a.y},b.prototype.len2=b.prototype.len2=function(){return this.dot(this)},b.prototype.len=b.prototype.len=function(){return n(this.len2())},o.Circle=a,a.prototype.getAABB=a.prototype.getAABB=function(){var a=this.r,c=this.pos.clone().sub(new b(a,a));return new d(c,2*a,2*a).toPolygon()},o.Polygon=c,c.prototype.setPoints=c.prototype.setPoints=function(a){var c=!this.points||this.points.length!==a.length;if(c){var d,e=this.calcPoints=[],f=this.edges=[],g=this.normals=[];for(d=0;d<a.length;d++)e.push(new b),f.push(new b),g.push(new b)}return this.points=a,this._recalc(),this},c.prototype.setAngle=c.prototype.setAngle=function(a){return this.angle=a,this._recalc(),this},c.prototype.setOffset=c.prototype.setOffset=function(a){return this.offset=a,this._recalc(),this},c.prototype.rotate=c.prototype.rotate=function(a){for(var b=this.points,c=b.length,d=0;d<c;d++)b[d].rotate(a);return this._recalc(),this},c.prototype.translate=c.prototype.translate=function(a,b){for(var c=this.points,d=c.length,e=0;e<d;e++)c[e].x+=a,c[e].y+=b;return this._recalc(),this},c.prototype._recalc=function(){var a,b=this.calcPoints,c=this.edges,d=this.normals,f=this.points,g=this.offset,h=this.angle,i=f.length;for(a=0;a<i;a++){var j=b[a].copy(f[a]);j.x+=g.x,j.y+=g.y,0!==h&&j.rotate(h)}for(a=0;a<i;a++){var k=b[a],l=a<i-1?b[a+1]:b[0],m=c[a].copy(l).sub(k);d[a].copy(m).perp().normalize()}return this},c.prototype.getAABB=c.prototype.getAABB=function(){for(var a,c=this.calcPoints,e=c.length,f=c[0].x,g=c[0].y,h=c[0].x,j=c[0].y,k=1;k<e;k++)a=c[k],a.x<f?f=a.x:a.x>h&&(h=a.x),a.y<g?g=a.y:a.y>j&&(j=a.y);return new d(this.pos.clone().add(new b(f,g)),h-f,j-g).toPolygon()},c.prototype.getCentroid=c.prototype.getCentroid=function(){for(var c=this.calcPoints,d=c.length,e=0,f=0,g=0,h=0;h<d;h++){var i=c[h],j=h===d-1?c[0]:c[h+1],k=i.x*j.y-j.x*i.y;e+=(i.x+j.x)*k,f+=(i.y+j.y)*k,g+=k}return g*=3,e/=g,f/=g,new b(e,f)},o.Box=d,d.prototype.toPolygon=d.prototype.toPolygon=function(){var a=this.pos,d=this.w,e=this.h;return new c(new b(a.x,a.y),[new b,new b(d,0),new b(d,e),new b(0,e)])},o.Response=e,e.prototype.clear=e.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=m,this};for(var q=[],p=0;10>p;p++)q.push(new b);for(var i=[],p=0;5>p;p++)i.push([]);var r=new e,s=new d(new b(),1e-6,1e-6).toPolygon();o.isSeparatingAxis=g;var t=-1,u=0,v=1;return o.pointInCircle=function(a,b){var c=q.pop().copy(a).sub(b.pos),d=b.r*b.r,e=c.len2();return q.push(c),e<=d},o.pointInPolygon=function(a,b){s.pos.copy(a),r.clear();var c=k(s,b,r);return c&&(c=r.aInB),c},o.testCircleCircle=function(c,a,b){var d=q.pop().copy(a.pos).sub(c.pos),e=c.r+a.r,f=d.len2();if(f>e*e)return q.push(d),!1;if(b){var g=n(f);b.a=c,b.b=a,b.overlap=e-g,b.overlapN.copy(d.normalize()),b.overlapV.copy(d).scale(b.overlap),b.aInB=c.r<=a.r&&g<=a.r-c.r,b.bInA=a.r<=c.r&&g<=c.r-a.r}return q.push(d),!0},o.testPolygonCircle=j,o.testCirclePolygon=function(b,c,d){var e=j(c,b,d);if(e&&d){var f=d.a,a=d.aInB;d.overlapN.reverse(),d.overlapV.reverse(),d.a=d.b,d.b=f,d.aInB=d.bInA,d.bInA=a}return e},o.testPolygonPolygon=k,o});

//# sourceMappingURL=woof.js.map