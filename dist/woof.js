"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}window.BrowserImage=Image;function Woof(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=a.global,c=b!==void 0&&b,d=a.fullScreen,e=a.height,f=e===void 0?500:e,g=a.width,h=g===void 0?350:g;if(window.global)throw new Error("You must turn off global mode in the Woof script tag if you want to create your own Woof object.");this.global=c;var j=this.global?window:this;j.global=c,j.sprites=[],j.backdrop={color:null,type:null,url:null,size:"100% 100%",repeat:"no-repeat"},j.stopped=!0,j.fullScreen1=d!==void 0&&d,j._cameraX=0,j._cameraY=0,Object.defineProperty(j,"cameraX",{get:function get(){return j._cameraX},set:function set(a){j.maxX=a+this.width/2,j.minX=a-this.width/2,j.mouseX+=a-j._cameraX,j._cameraX=a}}),Object.defineProperty(j,"cameraY",{get:function get(){return j._cameraY},set:function set(a){j.maxY=a+this.height/2,j.minY=a-this.height/2,j.mouseY+=a-j._cameraY,j._cameraY=a}}),Object.defineProperty(j,"fullScreen",{get:function get(){return j.fullScreen1},set:function set(a){j.fullScreen1=a}}),j.fullScreen1&&(h=window.innerWidth,f=window.innerHeight,window.addEventListener("load",function(){document.body.style.margin=0,document.body.style.padding=0})),j._readys=[],j.ready=function(a){if("function"!=typeof a)throw new TypeError("ready(function) requires one function input.");j.stopped?j._readys.push(a):a()},j._runReadys=function(){j.stopped=!1,j._readys.forEach(function(a){a()}),j._readys=[]},window.addEventListener("load",function(){document.documentElement.style.width="100%",document.documentElement.style.height="100%",document.body.style.width="100%",document.body.style.height="100%",j._mainDiv=document.createElement("div"),document.body.appendChild(j._mainDiv),j._mainDiv.id="project",j._mainDiv.style.position="relative",j._mainDiv.style.width="100%",j._mainDiv.style.height="100%",j._spriteCanvas=document.createElement("canvas"),j._mainDiv.appendChild(j._spriteCanvas),j._spriteCanvas.id="sprites",j._spriteCanvas.width=h,j._spriteCanvas.height=f,j._spriteCanvas.style.zIndex=3,j._spriteCanvas.style.position="absolute",j._penCanvas=document.createElement("canvas"),j._mainDiv.appendChild(j._penCanvas),j._penCanvas.id="pen",j._penCanvas.width=h,j._penCanvas.height=f,j._penCanvas.style.zIndex=2,j._penCanvas.style.position="absolute",j._backdropDiv=document.createElement("div"),j._mainDiv.appendChild(j._backdropDiv),j._backdropDiv.id="backdrop",j._backdropDiv.width=h,j._backdropDiv.height=f,j._backdropDiv.style.zIndex=1,j._backdropDiv.style.position="absolute",j._backdropDiv.style.width="100%",j._backdropDiv.style.height="100%",j._spriteContext=j._spriteCanvas.getContext("2d"),j._penContext=j._penCanvas.getContext("2d"),j._runReadys()}),j.setBackdropSize=function(a,b){if("number"!=typeof a||"number"!=typeof b)throw new TypeError("setBackdropSize(width, height) requires two number inputs.");if(j.fullScreen1)throw Error("You cannot manually set the backdrop size in full-screen mode. You can full-screen mode off with: fullScreen = false.");else j._setCanvasSize(a,b)},j._setCanvasSize=function(a,b){j.height=b,j.width=a,j.minX=j.cameraX-j.width/2,j.maxX=j.cameraX+j.width/2,j.minY=j.cameraY-j.height/2,j.maxY=j.cameraY+j.height/2,j.ready(function(){j._spriteCanvas.width=j.width,j._spriteCanvas.height=j.height;var c=j._penContext.getImageData(0,0,a,b);j._penCanvas.width=j.width,j._penCanvas.height=j.height,j._penContext.putImageData(c,0,0),j._backdropDiv.style.width=j.width,j._backdropDiv.style.height=j.height,setTimeout(j._renderBackdrop)})},j._setCanvasSize(h,f),window.addEventListener("resize",function(){j.fullScreen1&&j._setCanvasSize(window.innerWidth,window.innerHeight)}),j.bounds=function(){return{left:j.minX,right:j.maxX,bottom:j.minYm,top:j.maxY}},j.randomX=function(){if(0<arguments.length)throw new TypeError("randomX() requires no inputs.");return Woof.prototype.random(j.minX,j.maxX)},j.randomY=function(){if(0<arguments.length)throw new TypeError("randomY() requires no inputs.");return Woof.prototype.random(j.minY,j.maxY)},j._renderBackdrop=function(){var a=j.backdrop,b=a.size,c=a.type,d=a.url,e=a.color,f=a.repeat;j._backdropDiv.style.background="url"===c?"url('"+d+"')":e,j._backdropDiv.style.backgroundRepeat=f,j._backdropDiv.style.backgroundSize=b},j.setBackdropURL=function(a){if("string"!=typeof a)throw new TypeError("setBackDropUrl(url) requires one string input.");j.backdrop.url=a,j.backdrop.type="url";var b=new BrowserImage;b.onload=function(){j.ready(j._renderBackdrop)},b.onerror=function(){var b=new Error;throw b.type="ImageLoadError",b.url=a,b},b.src=a},j.setBackdropStyle=function(a){if(a=a.split(" "),2<a.length)throw Error("setBackdropStyle can take one or two arguments, separated by a space.");var b=[/^cover$/,/^contain$/,/^\d+em$/,/^\d+px$/,/^\d+%$/,/^auto$/];if(!a.every(function(a){return b.some(function(b){return a.match(b)})}))throw Error("setBackdropStyle only understands sizes such as 5em, 50px, 50% and the keywords cover, contain, and auto");j.backdrop.size=a.join(" "),j.ready(j._renderBackdrop)},j.setBackdropRepeat=function(a){var b=["repeat","no-repeat","repeat-x","repeat-y","space","round"];if(!b.includes(a))throw Error("setBackdropRepeat can only understand one of the following: "+b.join(", "));j.backdrop.repeat=a,j.ready(j._renderBackdrop)},j.setBackdropColor=function(a){if("string"!=typeof a)throw new TypeError("setBackdropColor(color) takes one string input.");j.backdrop.color=a,j.backdrop.type="color",j.ready(j._renderBackdrop)},j.freezing=!1,j.freeze=function(){if(0<arguments.length)throw new TypeError("freeze() requires no inputs.");j.freezing||j.stopped||(j.freezing=!0,j.after(10,"miliseconds",function(){j.stopped=!0,j.freezing=!1}))},j.defrost=function(){if(0<arguments.length)throw new TypeError("defrost() requires no inputs.");j.stopped=!1},j.translateToCenter=function(a,b){return[a-j.width/2+j.cameraX-j._spriteCanvas.offsetLeft,j.height/2-b+j.cameraY+j._spriteCanvas.offsetTop]},j.translateToCanvas=function(a,b){return[a+j.maxX-j._spriteCanvas.offsetLeft,j.maxY-b+j._spriteCanvas.offsetTop]},j.mouseDown=!1,j.mouseX=0,j.mouseY=0,j.pMouseX=0,j.pMouseY=0,j.mouseXSpeed=0,j.mouseYSpeed=0,j.keysDown=[],j.keysDown.oldIncludes=j.keysDown.includes,j.keysDown.includes=function(a){var b=a.toUpperCase();return"UP ARROW"===b?b="UP":"LEFT ARROW"===b?b="LEFT":"RIGHT ARROW"===b?b="RIGHT":"DOWN ARROW"===b?b="DOWN":"RETURN"===b?b="ENTER":"CONTROL"===b?b="CTRL":"OPTION"===b?b="ALT":"ESC"===b?b="ESCAPE":"SPACE BAR"===b||"SPACEBAR"===b?b="SPACE":"CAPS"===b?b="CAPS LOCK":"DEL"===b||"BACKSPACE"===b?b="DELETE":("CMD"==b||"WINDOWS"==b||"SEARCH"==b)&&(b="COMMAND"),this.oldIncludes(b)},j.ready(function(){j._spriteCanvas.addEventListener("mousedown",function(a){j.mouseDown=!0;var b=j.translateToCenter(a.clientX,a.clientY),c=_slicedToArray(b,2);j.mouseX=c[0],j.mouseY=c[1]}),window.addEventListener("mouseup",function(a){j.mouseDown=!1;var b=j.translateToCenter(a.clientX,a.clientY),c=_slicedToArray(b,2);j.mouseX=c[0],j.mouseY=c[1]}),j._spriteCanvas.addEventListener("touchstart",function(a){j.mouseDown=!0;var b=j.translateToCenter(a.targetTouches[0].clientX,a.targetTouches[0].clientY),c=_slicedToArray(b,2);j.mouseX=c[0],j.mouseY=c[1]}),j._spriteCanvas.addEventListener("touchend",function(){setTimeout(function(){j.mouseDown=!1},0)}),j._spriteCanvas.addEventListener("mousemove",function(a){var b=j.translateToCenter(a.clientX,a.clientY),c=_slicedToArray(b,2);j.mouseX=c[0],j.mouseY=c[1]}),j._spriteCanvas.addEventListener("touchmove",function(a){var b=j.translateToCenter(a.targetTouches[0].clientX,a.targetTouches[0].clientY),c=_slicedToArray(b,2);j.mouseX=c[0],j.mouseY=c[1],a.preventDefault()}),document.body.addEventListener("keydown",function(a){var b=Woof.prototype.keyCodeToString(a.keyCode);j.keysDown.includes(b)||j.keysDown.push(b)}),document.body.addEventListener("keyup",function(a){var b=Woof.prototype.keyCodeToString(a.keyCode);j.keysDown.includes(b)&&j.keysDown.splice(j.keysDown.indexOf(b),1)}),j._onMouseMoveHandler=function(a){var b=j.translateToCenter(a.clientX,a.clientY),c=_slicedToArray(b,2),d=c[0],e=c[1];j._onMouseMoves.forEach(function(a){a(d,e)})},j._spriteCanvas.addEventListener("mousemove",j._onMouseMoveHandler),j._onMouseDownHandler=function(a){var b=j.translateToCenter(a.clientX,a.clientY),c=_slicedToArray(b,2),d=c[0],e=c[1];j._onMouseDowns.forEach(function(a){a(d,e)})},j._spriteCanvas.addEventListener("mousedown",j._onMouseDownHandler),j._onMouseUpHandler=function(a){var b=j.translateToCenter(a.clientX,a.clientY),c=_slicedToArray(b,2),d=c[0],e=c[1];j._onMouseUps.forEach(function(a){a(d,e)})},j._spriteCanvas.addEventListener("mouseup",j._onMouseUpHandler),j._onKeyDownHandler=function(a){var b=Woof.prototype.keyCodeToString(a.keyCode);j._onKeyDowns.forEach(function(a){a(b)})},document.body.addEventListener("keydown",j._onKeyDownHandler),j._onKeyUpHandler=function(a){var b=Woof.prototype.keyCodeToString(a.keyCode);j._onKeyUps.forEach(function(a){a(b)})},document.body.addEventListener("keyup",j._onKeyUpHandler)}),j._onMouseMoves=[],j.onMouseMove=function(a){if("function"!=typeof a)throw new TypeError("onMouseMove(function) requires one function input.");j._onMouseMoves.push(a)},j._onMouseDowns=[],j.onMouseDown=function(a){if("function"!=typeof a)throw new TypeError("onMouseDown(function) requires one function input.");j._onMouseDowns.push(a)},j._onMouseUps=[],j.onMouseUp=function(a){if("function"!=typeof a)throw new TypeError("onMouseUp(function) requires one function input.");j._onMouseUps.push(a)},j._onKeyDowns=[],j.onKeyDown=function(a){if("function"!=typeof a)throw new TypeError("onKeyDown(function) requires one function input.");j._onKeyDowns.push(a)},j._onKeyUps=[],j.onKeyUp=function(a){if("function"!=typeof a)throw new TypeError("onKeyUp(function) requires one function input.");j._onKeyUps.push(a)},j._everys=[],j.every=function(a,b,c){if("function"!=typeof c||"number"!=typeof a&&"function"!=typeof a)throw new TypeError("every(time, units, function) requires a number/function, time unit and function input.");if("function"==typeof a){if("number"!=typeof a())throw new TypeError("every(time, units, function) requires a time function that returns a number");var d=function(e){var f=Woof.prototype.unitsToMiliseconds(a(),b);c(),e&&j._everys.includes(e)&&j._everys.splice(j._everys.indexOf(e),1);var g=setTimeout(function(){d(g)},f);j._everys.push(g)};d()}else{var e=Woof.prototype.unitsToMiliseconds(a,b);c(),j._everys.push(setInterval(c,e))}},j.forever=function(a){if("function"!=typeof a)throw new TypeError("forever(function) requires one function input.");j.repeatUntil(function(){return!1},a)},j.when=function(a,b){if("function"!=typeof b||"function"!=typeof a)throw new TypeError("when(conditionFunction, function) requires two function inputs.");j.forever(function(){var c;try{c=a()}catch(b){throw console.error("Bad condition in when(conditionFunction, function): "+a),b}c&&b()})},j._repeats=[],j.repeat=function(a,b,c){if("function"!=typeof b||"number"!=typeof a||c!==void 0&&"function"!=typeof c)throw new TypeError("repeat(times, function, afterFunction) requires a number and a function, and optionally accepts an extra function.");j._repeats.push(new Woof.prototype.Repeat(a,b,c))},j.repeatUntil=function(a,b,c){if("function"!=typeof b||"function"!=typeof a||c!==void 0&&"function"!=typeof c)throw new TypeError("repeatUntil(conditionFunction, function, afterFunction) requires two functions, and optionally accepts an extra function.");j._repeats.push(new Woof.prototype.RepeatUntil(a,b,c))},j._runRepeats=function(){j._repeats.forEach(function(a){a.next()}),j._repeats=j._repeats.filter(function(a){return!a.done})},j._afters=[],j.after=function(a,b,c){var d=Woof.prototype.unitsToMiliseconds(a,b);if("function"!=typeof c||"number"!=typeof a)throw new TypeError("after(time, units, function) requires a number, unit and function input.");j._afters.push(setTimeout(c,d))},j._renderSprites=function(){j._spriteContext.clearRect(0,0,j.width,j.height),j.sprites.forEach(function(a){a._render(j._spriteContext)})},j.clearPen=function(){if(0<arguments.length)throw new TypeError("clearPen() requires no inputs.");j._penContext.clearRect(0,0,j.width,j.height)},j._calculateMouseSpeed=function(){j.mouseXSpeed=j.mouseX-j.pMouseX,j.mouseYSpeed=j.mouseY-j.pMouseY;var a=[j.mouseX,j.mouseY];j.pMouseX=a[0],j.pMouseY=a[1]},j.woofEpoch=new Date,j.timer=function(){if(0<arguments.length)throw new TypeError("timer() requires no inputs.");var a=new Date;return(a-j.woofEpoch)/1e3},j.resetTimer=function(){if(0<arguments.length)throw new TypeError("resetTimer() requires no inputs.");j.woofEpoch=new Date},j._render=function(){j._runRepeats(),j._calculateMouseSpeed(),j.renderInterval=window.requestAnimationFrame(j._render);j.stopped||j._renderSprites()},j.ready(j._render)}Woof.prototype.Sprite=function(){var a=Math.atan2,b=Math.max,c=Math.min,d=Math.PI,e=Math.sqrt,f=Math.pow,g=Math.round,h=Math.sin,j=Math.cos,k=this,l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},m=l.project,n=void 0===m?void 0:m,o=l.x,p=void 0===o?0:o,q=l.y,r=void 0===q?0:q,s=l.angle,t=void 0===s?0:s,u=l.rotationStyle,v=void 0===u?"ROTATE":u,w=l.showing,x=l.penColor,y=void 0===x?"black":x,z=l.penWidth,A=void 0===z?1:z,B=l.penDown,C=l.showCollider,D=l.brightness,E=void 0===D?100:D;if(!!n)this.project=n.global?window:n;else if(global)this.project=window;else throw new TypeError("When not in global mode, you must supply your {project: project} to each Sprite.");this.project.sprites.push(this),Object.defineProperty(this,"x",{get:function get(){return this.privateX},set:function set(a){if("number"!=typeof a)throw new TypeError("sprite.x can only be set to a number.");this.privateX=a,this.project.ready(this.trackPen)}}),Object.defineProperty(this,"y",{get:function get(){return this.privateY},set:function set(a){if("number"!=typeof a)throw new TypeError("sprite.y can only be set to a number.");this.privateY=a,this.project.ready(this.trackPen)}}),this.privateX=p,this.privateY=r,this.angle=t,this.rotationStyle=v,this.showing=!(w!==void 0)||w,this._penDown=B!==void 0&&B,this.penColor=y,this.penWidth=A,this.deleted=!1,this.showCollider=C!==void 0&&C,this.brightness=E,this.toJSON=function(){return{x:k.x,y:k.y,angle:k.angle,rotationStyle:k.rotationStyle,showing:k.showing,penDown:k._penDown,penColor:k.penColor,penWidth:k.penWidth,deleted:k.deleted}};var F=[this.x,this.y];this.lastX=F[0],this.lastY=F[1],this.trackPen=function(){if(k._penDown&&(k.lastX!=k.x||k.lastY!=k.y)){var a,b;k.project._penContext.save(),k.project._penContext.beginPath(),(a=k.project._penContext).moveTo.apply(a,_toConsumableArray(k.project.translateToCanvas(k.lastX,k.lastY))),(b=k.project._penContext).lineTo.apply(b,_toConsumableArray(k.project.translateToCanvas(k.x,k.y))),k.project._penContext.lineCap="round",k.project._penContext.strokeStyle=k.penColor,k.project._penContext.lineWidth=k.penWidth,k.project._penContext.stroke(),k.project._penContext.restore()}var c=[k.x,k.y];k.lastX=c[0],k.lastY=c[1]},this.rotatedVector=function(a,b){var c,d;return"line"==this.type?(c=j(this.radians())*(a-this.x)-h(this.radians())*(b-this.y+this.height/2)+this.x,d=h(this.radians())*(a-this.x)+j(this.radians())*(b-this.y+this.height/2)+this.y):(c=j(this.radians())*(a-this.x)-h(this.radians())*(b-this.y)+this.x,d=h(this.radians())*(a-this.x)+j(this.radians())*(b-this.y)+this.y),new SAT.Vector(c,d)},this.translatedVector=function(a,b){return new SAT.Vector(b.x-a.x,b.y-a.y)},this.collider=function(){var a=this.rotatedVector(this.x-this.width/2,this.y-this.height/2),b=new SAT.Vector(0,0),c=this.translatedVector(a,this.rotatedVector(this.x+this.width/2,this.y-this.height/2)),d=this.translatedVector(a,this.rotatedVector(this.x+this.width/2,this.y+this.height/2)),e=this.translatedVector(a,this.rotatedVector(this.x-this.width/2,this.y+this.height/2));return new SAT.Polygon(a,[b,c,d,e])},this._renderCollider=function(a){var b=this.collider();a.save(),a.beginPath(),a.moveTo.apply(a,_toConsumableArray(this.project.translateToCanvas(b.calcPoints[0].x+b.pos.x,b.calcPoints[0].y+b.pos.y))),a.lineTo.apply(a,_toConsumableArray(this.project.translateToCanvas(b.calcPoints[1].x+b.pos.x,b.calcPoints[1].y+b.pos.y))),a.lineTo.apply(a,_toConsumableArray(this.project.translateToCanvas(b.calcPoints[2].x+b.pos.x,b.calcPoints[2].y+b.pos.y))),a.lineTo.apply(a,_toConsumableArray(this.project.translateToCanvas(b.calcPoints[3].x+b.pos.x,b.calcPoints[3].y+b.pos.y))),a.lineTo.apply(a,_toConsumableArray(this.project.translateToCanvas(b.calcPoints[0].x+b.pos.x,b.calcPoints[0].y+b.pos.y))),a.strokeStyle="green",a.lineWidth=4,a.stroke(),a.restore()},this._render=function(a){this.showing&&!this.deleted&&this.overlap(this.project.bounds())&&(this.showCollider&&this._renderCollider(a),a.save(),a.translate(g(this.canvasX()),g(this.canvasY())),a.globalAlpha=this.brightness/100,"ROTATE"==this.rotationStyle?a.rotate(-this.radians()):"NO ROTATE"==this.rotationStyle||"ROTATE LEFT RIGHT"==this.rotationStyle&&(90<=this.angle%360&&270>this.angle%360?a.scale(-1,1):0<=this.angle%360&&90>this.angle%360||360>=this.angle%360&&270<=this.angle%360),this.render(a),a.restore())},this.distanceTo=function(a,b){if(1===arguments.length){if("object"==("undefined"==typeof a?"undefined":_typeof(a))){var c=this.x-a.x,d=this.y-a.y;return e(f(c,2)+f(d,2))}throw new TypeError("distanceTo(sprite) requires one sprite input.")}else if("number"!=typeof a||"number"!=typeof b)throw new TypeError("distanceTo(x,y) requires two number inputs.");else{var c=this.x-a,d=this.y-b;return e(f(c,2)+f(d,2))}},this.move=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1;if("number"!=typeof a)throw new TypeError("move(steps) requires one number input.");this.privateX+=a*j(this.radians()),this.privateY+=a*h(this.radians()),this.project.ready(this.trackPen)},this.setRotationStyle=function(a){if("ROTATE"==a)k.rotationStyle="ROTATE";else if("NO ROTATE"==a)k.rotationStyle="NO ROTATE";else if("ROTATE LEFT RIGHT"==a)k.rotationStyle="ROTATE LEFT RIGHT";else throw TypeError("Unrecognized rotation style: "+a)},this.radians=function(){return k.angle*d/180},this.canvasX=function(){return k.x-k.project.cameraX+k.project.width/2},this.canvasY=function(){return k.project.height/2-(k.y-k.project.cameraY)},this.bounds=function(){var a=k.width/2,b=k.height/2,c=k.x-a,d=k.x+a,e=k.y-b,f=k.y+b;return{left:c,right:d,top:f,bottom:e}},this.collisionCanvas=document.createElement("canvas"),this.collisionContext=this.collisionCanvas.getContext("2d"),this.touching=function(a,d){if("object"!=("undefined"==typeof a?"undefined":_typeof(a)))throw new TypeError("touching(sprite) requires one sprite input.");if(k.deleted||!k.showing)return!1;if(a.deleted||!a.showing)return!1;if(!detectCollision(k.collider(),a.collider()))return!1;if(!d)return!0;var e=k.bounds(),f=a.bounds(),g=c(e.left,f.left),h=b(e.top,f.top),l=b(e.right,f.right),m=c(e.bottom,f.bottom);k.collisionCanvas.width=k.project.width,k.collisionCanvas.height=k.project.height,k._render(k.collisionContext),k.collisionContext.globalCompositeOperation="source-in",a._render(k.collisionContext);var n=k.project.translateToCanvas(g,h),o=_slicedToArray(n,2),p=o[0],q=o[1];try{var r=k.collisionContext.getImageData(p,q,l-g,h-m).data}catch(a){if(a instanceof DOMException)return console.warn("You have an image at an untrusted URL. Consider uploading to Imgur and using https."),!0}for(var s=0;s<4*((l-g)*(h-m));s+=4)if(r[s+3])return!0;return!1},this.overlap=function(a){var b=a.left,c=a.right,d=a.top,e=a.bottom,f=k.bounds();return!(b>f.right||c<f.left||d<f.bottom||e>f.top)},this.over=function(a,b){if("number"!=typeof a||"number"!=typeof b)throw new TypeError("over(x, y) requires two number inputs.");if(k.deleted||!k.showing)return!1;var c=k.bounds(),d=b<=c.top,e=b>=c.bottom,f=a>=c.left,g=a<=c.right;return d&&e&&f&&g},Object.defineProperty(this,"mouseOver",{get:function get(){return!this.deleted&&this.showing&&this.over(this.project.mouseX,this.project.mouseY)}}),Object.defineProperty(this,"mouseDown",{get:function get(){return!this.deleted&&this.showing&&this.mouseOver&&this.project.mouseDown}}),this.turnLeft=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1;if("number"!=typeof a)throw new TypeError("turnLeft(degrees) requires one number input.");k.angle+=a},this.turnRight=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1;if("number"!=typeof a)throw new TypeError("turnRight(degrees) requires one number input.");k.angle-=a},this.sendToBack=function(){if(0<arguments.length)throw new TypeError("sendToBack() requires no inputs.");var a=this.project.sprites;a.splice(0,0,a.splice(a.indexOf(this),1)[0])},this.sendToFront=function(){if(0<arguments.length)throw new TypeError("sendToFront() requires no inputs.");var a=this.project.sprites;a.splice(a.length,0,a.splice(a.indexOf(this),1)[0])},Object.defineProperty(this,"penDown",{get:function get(){return function(){k._penDown=!0}},set:function set(a){k._penDown=a}}),this.penUp=function(){k._penDown=!1},this.show=function(){k.showing=!0},this.hide=function(){k.showing=!1},this.pointTowards=function(b,c){if(1===arguments.length){if("object"==("undefined"==typeof b?"undefined":_typeof(b)))this.angle=180*a(b.y-this.y,b.x-this.x)/d;else throw new TypeError("pointTowards(sprite) requires one sprite input.");}else if("number"!=typeof b||"number"!=typeof c)throw new TypeError("pointTowards(x, y) requires two number inputs.");else this.angle=180*a(c-this.y,b-this.x)/d},this._onMouseDowns=[],this.onMouseDown=function(a){if("function"!=typeof a)throw new TypeError("onMouseDown(function) requires one function input.");k._onMouseDowns.push(a)},this._onMouseDownHandler=function(a){var b=k.project.translateToCenter(a.clientX,a.clientY),c=_slicedToArray(b,2),d=c[0],e=c[1];k.showing&&k.over(d,e)&&k._onMouseDowns.forEach(function(a){a(d,e)})},this._onMouseUps=[],this.onMouseUp=function(a){if("function"!=typeof a)throw new TypeError("onMouseUp(function) requires one function input.");k._onMouseUps.push(a)},this._onMouseUpHandler=function(a){var b=k.project.translateToCenter(a.clientX,a.clientY),c=_slicedToArray(b,2),d=c[0],e=c[1];k.showing&&k.over(d,e)&&k._onMouseUps.forEach(function(a){a(d,e)})},this.project.ready(function(){k.project._spriteCanvas.addEventListener("mousedown",k._onMouseDownHandler),k.project._spriteCanvas.addEventListener("mouseup",k._onMouseUpHandler)}),this.delete=function(){if(0<arguments.length)throw new TypeError("delete() requires no inputs.");this.deleted||(this.showing=!1,this.deleted=!0,this.project.sprites.includes(this)&&(this.project.sprites.splice(this.project.sprites.indexOf(this),1),this.project._spriteCanvas.removeEventListener("mousedown",this._onClickHandler)))}},Woof.prototype.Text=function(){var a=this,b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},c=b.project,d=c===void 0?void 0:c,e=b.text,f=e===void 0?"Text":e,g=b.size,h=g===void 0?12:g,j=b.color,k=j===void 0?"black":j,l=b.fontFamily,m=l===void 0?"arial":l,n=b.textAlign,o=n===void 0?"center":n;this.type="text",Woof.prototype.Sprite.call(this,arguments[0]),this.text=f,this.size=Math.abs(h),this.color=k,this.fontFamily=m,this.textAlign=o,Object.defineProperty(this,"width",{get:function get(){var a,b=this;return this._applyInContext(function(){a=b.project._spriteContext.measureText(b.textEval()).width}),a},set:function set(){throw new TypeError("You cannot modify the width of Text. You can only change its size.")}}),Object.defineProperty(this,"height",{get:function get(){var a,b=this;return this._applyInContext(function(){a=b.project._spriteContext.measureText("M").width}),a},set:function set(){throw new TypeError("You cannot modify the height of Text. You can only change its size.")}}),this._applyInContext=function(b){a.project._spriteContext.save(),a.project._spriteContext.font=a.size+"px "+a.fontFamily,a.project._spriteContext.fillStyle=a.color,a.project._spriteContext.textAlign=a.textAlign,b(),a.project._spriteContext.restore()},this.textEval=function(){if("function"==typeof a.text)try{return a.text()}catch(a){console.error("Error with text function: "+a.message)}else return a.text},this.render=function(b){a._applyInContext(function(){b.fillText(a.textEval(),0,a.height/2)})}},Woof.prototype.Circle=function(){var a=this,b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},c=b.project,d=c===void 0?void 0:c,e=b.radius,f=e===void 0?10:e,g=b.color,h=g===void 0?"black":g;this.type="circle",Woof.prototype.Sprite.call(this,arguments[0]),this.radius=Math.abs(f),this.color=h,Object.defineProperty(this,"width",{get:function get(){return 2*this.radius},set:function set(){throw new TypeError("You cannot modify the width of Circle. You can only change its radius.")}}),Object.defineProperty(this,"height",{get:function get(){return 2*this.radius},set:function set(){throw new TypeError("You cannot modify the height of Circle. You can only change its radius.")}}),this.render=function(b){b.beginPath(),b.arc(0,0,a.radius,0,2*Math.PI),b.fillStyle=a.color,b.fill()}},Woof.prototype.Rectangle=function(){var a=Math.abs,b=this,c=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},d=c.project,e=d===void 0?void 0:d,f=c.height,g=f===void 0?10:f,h=c.width,j=h===void 0?10:h,k=c.color,l=k===void 0?"black":k;this.type="rectangle",Woof.prototype.Sprite.call(this,arguments[0]),this.rectangleHeight=a(g),this.rectangleWidth=a(j),this.color=l,Object.defineProperty(this,"width",{get:function get(){return this.rectangleWidth},set:function set(a){if("number"!=typeof a)throw new TypeError("rectangle.width can only be set to a number.");this.rectangleWidth=a}}),Object.defineProperty(this,"height",{get:function get(){return this.rectangleHeight},set:function set(a){if("number"!=typeof a)throw new TypeError("rectangle.height can only be set to a number.");this.rectangleHeight=a}}),this.render=function(a){a.fillStyle=b.color,a.fillRect(-b.width/2,-b.height/2,b.width,b.height)}},Woof.prototype.Oval=function(){var a=Math.abs,b=this,c=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},d=c.project,e=d===void 0?void 0:d,f=c.height,g=f===void 0?50:f,h=c.width,j=h===void 0?20:h,k=c.color,l=k===void 0?"green":k;this.type="oval",Woof.prototype.Sprite.call(this,arguments[0]),this.ovalHeight=a(g),this.ovalWidth=a(j),this.color=l,Object.defineProperty(this,"width",{get:function get(){return this.ovalWidth},set:function set(a){if("number"!=typeof a)throw new TypeError("oval.width can only be set to a number.");this.ovalWidth=a}}),Object.defineProperty(this,"height",{get:function get(){return this.ovalHeight},set:function set(a){if("number"!=typeof a)throw new TypeError("oval.height can only be set to a number.");this.ovalHeight=a}}),this.render=function(a){a.fillStyle=b.color,a.beginPath(),a.ellipse(0,0,j/2,g/2,0,0,2*Math.PI),a.fill()}},Woof.prototype.Polygon=function(){var a=Math.abs,b=Math.PI,c=this,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=d.project,f=void 0===e?void 0:e,g=d.sides,h=void 0===g?3:g,j=d.length,k=void 0===j?100:j,l=d.color,m=void 0===l?"black":l;this.type="polygon",Woof.prototype.Sprite.call(this,arguments[0]),this.polygonSides=a(h),this.polygonLength=a(k),this.color=m,Object.defineProperty(this,"sides",{get:function get(){return this.polygonSides},set:function set(a){if("number"!=typeof a||3>a)throw new TypeError("polygon.sides can only be set to a number that is greater than or equal to 3.");this.polygonSides=h}}),Object.defineProperty(this,"length",{get:function get(){return this.polygonLength},set:function set(a){if("number"!=typeof a)throw new TypeError("polygon.length can only be set to a number.");this.polygonLength=a}}),this.collider=function(){var a=this.rotatedVector(this.x-this.length,this.y-this.length),b=new SAT.Vector(0,0),c=this.translatedVector(a,this.rotatedVector(this.x+this.length,this.y-this.length)),d=this.translatedVector(a,this.rotatedVector(this.x+this.length,this.y+this.length)),e=this.translatedVector(a,this.rotatedVector(this.x-this.length,this.y+this.length));return new SAT.Polygon(a,[b,c,d,e])},this.render=function(a){for(a.fillStyle=c.color,a.beginPath(),a.moveTo(1*k,0*k),i=1;i<h;i++)a.lineTo(k*Math.cos(i*(2*b/h)),k*Math.sin(i*(2*b/h)));a.fill()}},Woof.prototype.Line=function(){var a=Math.PI,b=Math.pow,c=this,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=d.project,f=void 0===e?void 0:e,g=d.width,h=void 0===g?1:g,j=d.x1,k=void 0===j?10:j,l=d.y1,m=void 0===l?10:l,n=d.color,o=void 0===n?"black":n;this.type="line",Woof.prototype.Sprite.call(this,arguments[0]),this.x1=k,this.y1=m,this.color=o,this.lineWidth=Math.abs(h),Object.defineProperty(this,"width",{get:function get(){return this.lineWidth},set:function set(a){if("number"!=typeof a)throw new TypeError("line.width can only be set to a number.");this.lineWidth=a}}),Object.defineProperty(this,"height",{get:function get(){return Math.sqrt(b(this.x-this.x1,2)+b(this.y-this.y1,2))},set:function set(){throw new TypeError("You cannot set line.height directly. You can only modify line.height by changing the length of your line through moving its points.")}}),Object.defineProperty(this,"angle",{get:function get(){return 180*Math.atan2(-this.x1+this.x,this.y1-this.y)/a+90},set:function set(){throw new TypeError("You cannot set line.angle directly. You can only modify line.angle by changing the position of the line's points.")}}),this.move=function(){throw new TypeError("You cannot move lines with move() unfortunately! Change the x, y, x1, and y1 values instead.")},this.radians=function(){return(this.angle-90)*a/180},this.render=function(a){a.fillStyle=c.color,a.fillRect(-c.width/2,-c.height,c.width,c.height)}},Woof.prototype.Image=function(){var a=Math.abs,b=this,c=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},d=c.project,e=d===void 0?void 0:d,f=c.url,g=f===void 0?"./images/SMJjVCL.png":f,h=c.height,j=c.width;this.type="image",Woof.prototype.Sprite.call(this,arguments[0]),this.imageHeight=a(h),this.imageWidth=a(j),this.setImageURL=function(a){this.image=new window.BrowserImage,this.image.src=a,this.image.onerror=function(){var b=new Error;throw b.type="ImageLoadError",b.url=a,b}},this.setImageURL(g),Object.defineProperty(this,"width",{get:function get(){return this.imageWidth||this.image.width},set:function set(a){if("number"!=typeof a)throw new TypeError("image.width can only be set to a number.");this.imageWidth=a}}),Object.defineProperty(this,"height",{get:function get(){return this.imageHeight||this.image.height},set:function set(a){if("number"!=typeof a)throw new TypeError("image.width can only be set to a number.");this.imageHeight=a}}),this.render=function(a){b.image.complete&&0!==b.image.naturalHeight&&a.drawImage(b.image,-b.width/2,-b.height/2,b.width,b.height)}},Woof.prototype.Sound=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=a.url,c=b===void 0?"":b,d=a.loop,e=d===void 0?"false":d,f=a.volume,g=f===void 0?"normal":f,h=a.speed,j=h===void 0?"normal":h;this.audio=new Audio(c),this.audio.loop=e,this.audioSettings={speed:{slow:.5,normal:1,fast:2},volume:{mute:0,low:.5,normal:1}};var k=function(a){if("number"==typeof a){if(0<=a&&1>=a)return a;throw Error("Volume can only be set to a number value between 0 and 1.")}else if("string"==typeof a){if("mute"==a)return 0;if("low"==a)return .5;if("normal"==a)return 1;throw Error("Volume can only be set to a string value of \"mute\", \"low\", or \"normal\".")}else throw Error(a+" is not an accepted value for volume.")},l=function(a){if("number"==typeof a){if(.5<=a&&2>=a)return a;throw Error("Speed can only be set to a number value between 0.5 and 2.")}else if("string"==typeof a){if("slow"==a)return .5;if("normal"==a)return 1;if("fast"==a)return 2;throw Error("Speed can only be set to a string value of \"slow\", \"normal\", or \"fast\".")}else throw Error(a+" is not an accepted value for speed.")};this.audio.playbackRate=l(j),this.audio.volume=k(g),Object.defineProperty(this,"speed",{get:function get(){return this.audio.playbackRate},set:function set(a){this.audio.playbackRate=l(a)}}),Object.defineProperty(this,"volume",{get:function get(){return this.audio.volume},set:function set(a){this.audio.volume=k(a)}}),Object.defineProperty(this,"loop",{get:function get(){return this.audio.loop},set:function set(a){if("boolean"!=typeof a)throw new Error("Loop must be set to true or false.");this.audio.loop=a}}),this.startPlaying=function(){this.audio.play()},this.stopPlaying=function(){this.audio.pause()},this.neverPlayed=function(){return 0===this.audio.played.length}},Woof.prototype.customSprite=function(a){if(!a.render)throw new TypeError("customSprites must contain a render function");return function(){var b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},c=b.project,d=c===void 0?void 0:c;Woof.prototype.Sprite.call(this,arguments[0]),Woof.prototype.extend(this,a)}},Woof.prototype.Repeat=function(a,b,c){var d=this;this.func=b,this.times=a,this.done=!1,this.next=function(){return d.done?void 0:0>=d.times?(d.done=!0,void(c&&c())):void(d.func(),d.times--)}},Woof.prototype.RepeatUntil=function(a,b,c){var d=this;this.func=b,this.condition=a,this.done=!1,this.next=function(){if(!d.done){var a;try{a=d.condition()}catch(a){throw console.error("Error in Repeat Until condition"),a}return a?(d.done=!0,void(c&&c())):void d.func()}}},Woof.prototype.keyCodeToString=function(a){return 38==a?"UP":37==a?"LEFT":39==a?"RIGHT":40==a?"DOWN":9==a?"TAB":13==a?"ENTER":16==a?"SHIFT":17==a?"CTRL":18==a?"ALT":27==a?"ESCAPE":32==a?"SPACE":192==a?"`":186==a?";":222==a?"'":189==a?"-":187==a?"=":219==a?"[":220==a?"\\":191==a?"/":190==a?".":188==a?",":20==a?"CAPS LOCK":8==a?"DELETE":91==a?"COMMAND":65<=a&&90>=a||48<=a&&57>=a?String.fromCharCode(a):a.toString()},Woof.prototype.unitsToMiliseconds=function(a,b){if("milliseconds"==b||"millisecond"==b)return a;if("miliseconds"==b||"milisecond"==b)return a;if("seconds"==b||"second"==b)return 1e3*a;if("minutes"==b||"minute"==b)return 60*(1e3*a);throw TypeError("Unrecognized Time")},Woof.prototype.random=function(c,a){var b=Math.max,d=Math.pow;if("number"!=typeof c||"number"!=typeof a)throw new TypeError("random(a, b) requires two number inputs.");var e=Math.min(c,a),f=b(c,a),g=Math.random()*(f-e)+e,h=function(a){return 0==a%1?0:a.toString().split(".")[1].length},j=b(h(f),h(e));return Math.round(g*d(10,j))/d(10,j)},Woof.prototype.dayOfMonth=function(){if(0<arguments.length)throw new TypeError("dayOfMonth() requires no inputs.");var a=new Date;return a.getDate()},Woof.prototype.dayOfWeek=function(){if(0<arguments.length)throw new TypeError("dayOfWeek() requires no inputs.");var a=new Date,b=a.getDay();if(0===b)return"Sunday";return 1==b?"Monday":2==b?"Tuesday":3==b?"Wednesday":4==b?"Thursday":5==b?"Friday":6==b?"Saturday":void 0},Woof.prototype.hourMilitary=function(){if(0<arguments.length)throw new TypeError("hourMilitary() requires no inputs.");var a=new Date;return a.getHours()},Woof.prototype.hour=function(){if(0<arguments.length)throw new TypeError("hour() requires no inputs.");var a=new Date,b=a.getHours();return 12>=b?b:b-12},Woof.prototype.minute=function(){if(0<arguments.length)throw new TypeError("minute() requires no inputs.");var a=new Date;return a.getMinutes()},Woof.prototype.year=function(){if(0<arguments.length)throw new TypeError("year() requires no inputs.");var a=new Date;return a.getFullYear()},Woof.prototype.months=["January","February","March","April","May","June","July","August","September","October","November","December"],Woof.prototype.month=function(){if(0<arguments.length)throw new TypeError("month() requires no inputs.");return Woof.prototype.months[new Date().getMonth()]},Woof.prototype.second=function(){if(0<arguments.length)throw new TypeError("second() requires no inputs.");var a=new Date;return a.getSeconds()},Woof.prototype.randomColor=function(){if(0<arguments.length)throw new TypeError("randomColor() requires no inputs.");return"rgb("+Woof.prototype.random(0,255)+", "+Woof.prototype.random(0,255)+", "+Woof.prototype.random(0,255)+")"},Woof.prototype.RIGHT=0,Woof.prototype.LEFT=180,Woof.prototype.UP=90,Woof.prototype.DOWN=270,Number.prototype.between=function(c,a){if("number"!=typeof c||"number"!=typeof a)throw new TypeError("between(a, b) requires two number inputs.");var b=Math.min.apply(Math,[c,a]),d=Math.max.apply(Math,[c,a]);return this>b&&this<d},Array.prototype.remove=function(a){for(var b=this.length;b--;)this[b]===a&&this.splice(b,1)};function throttle(a,b){if("function"!=typeof a||"number"!=typeof b)throw new TypeError("throttle(function, limit) requires one function input and one number.");var c=!1;return function(){var d=this,e=arguments;c||(a.apply(d,e),c=!0,setTimeout(function(){c=!1},b))}}Woof.prototype.rgb=function(a,b,c){return"rgb("+a+", "+b+", "+c+")"},Woof.prototype.extend=function(c,a){for(var b in a)c[b]=a[b];return c},Woof.prototype.importCodeURL=function(a,b){var c=document.createElement("script");c.type="text/javascript",c.src=a,c.onload=b,document.body.appendChild(c)},Woof.prototype.mobile=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")},Woof.prototype.range=function(a,b){var c=Math.abs,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(2>arguments.length||"number"!=typeof a||"number"!=typeof b||"number"!=typeof d)throw new TypeError("range() requires at least two number inputs.");if(0===d)throw new TypeError("the third parameter for range() cannot be 0");var e=[];if(a<b){d=c(d);for(var f=a;f<b;f+=d)e.push(f)}else if(a>b){d=-c(d);for(var g=a;g>b;g+=d)e.push(g)}return e},Woof.prototype.sqrt=function(b){if("number"!=typeof b)throw new TypeError("sqrt(a) requires one number input.");return Math.sqrt(b)},Woof.prototype.abs=function(b){if("number"!=typeof b)throw new TypeError("abs(a) requires one number input.");return Math.abs(b)},Woof.prototype.floor=function(b){if("number"!=typeof b)throw new TypeError("floor(a) requires one number input.");return Math.floor(b)},Woof.prototype.ceiling=function(b){if("number"!=typeof b)throw new TypeError("ceiling(a) requires one number input.");return Math.ceil(b)},Woof.prototype.sin=function(b){if("number"!=typeof b)throw new TypeError("sin(a) requires one number input.");return Math.sin(b*(Math.PI/180))},Woof.prototype.cos=function(b){if("number"!=typeof b)throw new TypeError("cos(a) requires one number input.");return Math.cos(b*(Math.PI/180))},Woof.prototype.tan=function(b){if("number"!=typeof b)throw new TypeError("tan(a) requires one number input.");return Math.tan(b*(Math.PI/180))},Woof.prototype.asin=function(b){if("number"!=typeof b)throw new TypeError("asin(a) requires one number input.");return Math.asin(b)*(180/Math.PI)},Woof.prototype.acos=function(b){if("number"!=typeof b)throw new TypeError("acos(a) requires one number input.");return Math.acos(b)*(180/Math.PI)},Woof.prototype.atan=function(b){if("number"!=typeof b)throw new TypeError("atan(a) requires one number input.");return Math.atan(b)*(180/Math.PI)},Woof.prototype.ln=function(b){if("number"!=typeof b)throw new TypeError("ln(a) requires one number input.");return Math.log(b)},Woof.prototype.log=function(b){if("number"!=typeof b)throw new TypeError("log(a) requires one number input.");return Math.log(b)/2.302585092994046},Woof.prototype.pow=function(c,a){if("number"!=typeof c||"number"!=typeof a)throw new TypeError("pow(a,b) requires two number inputs.");return Math.pow(c,a)};var getData=function(a,b){fetch(a,{mode:"cors",header:{"Access-Control-Allow-Origin":"*"}}).then(function(a){a.json().then(function(a){b(a)})})},currentScript=document.currentScript||Array.prototype.slice.call(document.getElementsByTagName("script")).find(function(a){return a.src.includes("woof.js")});!1!==JSON.parse(currentScript.getAttribute("global"))&&Woof.prototype.extend(window,new Woof({global:!0,fullScreen:!0}));
'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a};(function(a,b){'use strict';'function'==typeof define&&define.amd?define(b):'object'===('undefined'==typeof exports?'undefined':_typeof(exports))?module.exports=b():a.SAT=b()})(void 0,function(){'use strict';function b(a,b){this.x=a||0,this.y=b||0}function a(a,c){this.pos=a||new b,this.r=c||0}function c(a,c){this.pos=a||new b,this.angle=0,this.offset=new b,this.setPoints(c||[])}function d(a,c,d){this.pos=a||new b,this.w=c||0,this.h=d||0}function e(){this.a=null,this.b=null,this.overlapN=new b,this.overlapV=new b,this.clear()}function f(a,b,c){for(var d,e=m,f=-m,g=a.length,h=0;h<g;h++)d=a[h].dot(b),d<e&&(e=d),d>f&&(f=d);c[0]=e,c[1]=f}function g(a,b,c,d,e,g){var h=i.pop(),j=i.pop(),k=q.pop().copy(b).sub(a),m=k.dot(e);if(f(c,e,h),f(d,e,j),j[0]+=m,j[1]+=m,h[0]>j[1]||j[0]>h[1])return q.push(k),i.push(h),i.push(j),!0;if(g){var n=0;if(h[0]<j[0]){if(g.aInB=!1,h[1]<j[1])n=h[1]-j[0],g.bInA=!1;else{var o=h[1]-j[0],p=j[1]-h[0];n=o<p?o:-p}}else if(g.bInA=!1,h[1]>j[1])n=h[0]-j[1],g.aInB=!1;else{var o=h[1]-j[0],p=j[1]-h[0];n=o<p?o:-p}var r=l(n);r<g.overlap&&(g.overlap=r,g.overlapN.copy(e),0>n&&g.overlapN.reverse())}return q.push(k),i.push(h),i.push(j),!1}function h(a,b){var c=a.len2(),d=b.dot(a);return 0>d?t:d>c?v:u}function j(a,b,c){for(var d=q.pop().copy(b.pos).sub(a.pos),e=b.r,f=a.calcPoints,g=f.length,j=q.pop(),k=q.pop(),m=0;m<g;m++){var i=m===g-1?0:m+1,n=0===m?g-1:m-1,o=0,p=null;j.copy(a.edges[m]),k.copy(d).sub(f[m]),c&&k.len2()>e*e&&(c.aInB=!1);var r=h(j,k);if(-1===r){j.copy(a.edges[n]);var s=q.pop().copy(d).sub(f[n]);if(r=h(j,s),1===r){var t=k.len();if(t>e)return q.push(d),q.push(j),q.push(k),q.push(s),!1;c&&(c.bInA=!1,p=k.normalize(),o=e-t)}q.push(s)}else if(1!==r){var u=j.perp().normalize(),t=k.dot(u),v=l(t);if(0<t&&v>e)return q.push(d),q.push(u),q.push(k),!1;c&&(p=u,o=e-t,(0<=t||o<2*e)&&(c.bInA=!1))}else if(j.copy(a.edges[i]),k.copy(d).sub(f[i]),r=h(j,k),-1===r){var t=k.len();if(t>e)return q.push(d),q.push(j),q.push(k),!1;c&&(c.bInA=!1,p=k.normalize(),o=e-t)}p&&c&&l(o)<l(c.overlap)&&(c.overlap=o,c.overlapN.copy(p))}return c&&(c.a=a,c.b=b,c.overlapV.copy(c.overlapN).scale(c.overlap)),q.push(d),q.push(j),q.push(k),!0}function k(c,a,b){for(var d=c.calcPoints,e=d.length,f=a.calcPoints,h=f.length,j=0;j<e;j++)if(g(c.pos,a.pos,d,f,c.normals[j],b))return!1;for(var j=0;j<h;j++)if(g(c.pos,a.pos,d,f,a.normals[j],b))return!1;return b&&(b.a=c,b.b=a,b.overlapV.copy(b.overlapN).scale(b.overlap)),!0}var l=Math.abs,m=Number.MAX_VALUE,n=Math.sqrt,o={};o.Vector=b,o.V=b,b.prototype.copy=b.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this},b.prototype.clone=b.prototype.clone=function(){return new b(this.x,this.y)},b.prototype.perp=b.prototype.perp=function(){var a=this.x;return this.x=this.y,this.y=-a,this},b.prototype.rotate=b.prototype.rotate=function(a){var b=Math.sin,c=Math.cos,d=this.x,e=this.y;return this.x=d*c(a)-e*b(a),this.y=d*b(a)+e*c(a),this},b.prototype.reverse=b.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},b.prototype.normalize=b.prototype.normalize=function(){var a=this.len();return 0<a&&(this.x/=a,this.y/=a),this},b.prototype.add=b.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this},b.prototype.sub=b.prototype.sub=function(a){return this.x-=a.x,this.y-=a.y,this},b.prototype.scale=b.prototype.scale=function(a,b){return this.x*=a,this.y*=b||a,this},b.prototype.project=b.prototype.project=function(a){var b=this.dot(a)/a.len2();return this.x=b*a.x,this.y=b*a.y,this},b.prototype.projectN=b.prototype.projectN=function(a){var b=this.dot(a);return this.x=b*a.x,this.y=b*a.y,this},b.prototype.reflect=b.prototype.reflect=function(a){var b=this.x,c=this.y;return this.project(a).scale(2),this.x-=b,this.y-=c,this},b.prototype.reflectN=b.prototype.reflectN=function(a){var b=this.x,c=this.y;return this.projectN(a).scale(2),this.x-=b,this.y-=c,this},b.prototype.dot=b.prototype.dot=function(a){return this.x*a.x+this.y*a.y},b.prototype.len2=b.prototype.len2=function(){return this.dot(this)},b.prototype.len=b.prototype.len=function(){return n(this.len2())},o.Circle=a,a.prototype.getAABB=a.prototype.getAABB=function(){var a=this.r,c=this.pos.clone().sub(new b(a,a));return new d(c,2*a,2*a).toPolygon()},o.Polygon=c,c.prototype.setPoints=c.prototype.setPoints=function(a){var c=!this.points||this.points.length!==a.length;if(c){var d,e=this.calcPoints=[],f=this.edges=[],g=this.normals=[];for(d=0;d<a.length;d++)e.push(new b),f.push(new b),g.push(new b)}return this.points=a,this._recalc(),this},c.prototype.setAngle=c.prototype.setAngle=function(a){return this.angle=a,this._recalc(),this},c.prototype.setOffset=c.prototype.setOffset=function(a){return this.offset=a,this._recalc(),this},c.prototype.rotate=c.prototype.rotate=function(a){for(var b=this.points,c=b.length,d=0;d<c;d++)b[d].rotate(a);return this._recalc(),this},c.prototype.translate=c.prototype.translate=function(a,b){for(var c=this.points,d=c.length,e=0;e<d;e++)c[e].x+=a,c[e].y+=b;return this._recalc(),this},c.prototype._recalc=function(){var a,b=this.calcPoints,c=this.edges,d=this.normals,f=this.points,g=this.offset,h=this.angle,i=f.length;for(a=0;a<i;a++){var j=b[a].copy(f[a]);j.x+=g.x,j.y+=g.y,0!==h&&j.rotate(h)}for(a=0;a<i;a++){var k=b[a],l=a<i-1?b[a+1]:b[0],m=c[a].copy(l).sub(k);d[a].copy(m).perp().normalize()}return this},c.prototype.getAABB=c.prototype.getAABB=function(){for(var a,c=this.calcPoints,e=c.length,f=c[0].x,g=c[0].y,h=c[0].x,j=c[0].y,k=1;k<e;k++)a=c[k],a.x<f?f=a.x:a.x>h&&(h=a.x),a.y<g?g=a.y:a.y>j&&(j=a.y);return new d(this.pos.clone().add(new b(f,g)),h-f,j-g).toPolygon()},c.prototype.getCentroid=c.prototype.getCentroid=function(){for(var c=this.calcPoints,d=c.length,e=0,f=0,g=0,h=0;h<d;h++){var i=c[h],j=h===d-1?c[0]:c[h+1],k=i.x*j.y-j.x*i.y;e+=(i.x+j.x)*k,f+=(i.y+j.y)*k,g+=k}return g*=3,e/=g,f/=g,new b(e,f)},o.Box=d,d.prototype.toPolygon=d.prototype.toPolygon=function(){var a=this.pos,d=this.w,e=this.h;return new c(new b(a.x,a.y),[new b,new b(d,0),new b(d,e),new b(0,e)])},o.Response=e,e.prototype.clear=e.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=m,this};for(var q=[],p=0;10>p;p++)q.push(new b);for(var i=[],p=0;5>p;p++)i.push([]);var r=new e,s=new d(new b(),1e-6,1e-6).toPolygon();o.isSeparatingAxis=g;var t=-1,u=0,v=1;return o.pointInCircle=function(a,b){var c=q.pop().copy(a).sub(b.pos),d=b.r*b.r,e=c.len2();return q.push(c),e<=d},o.pointInPolygon=function(a,b){s.pos.copy(a),r.clear();var c=k(s,b,r);return c&&(c=r.aInB),c},o.testCircleCircle=function(c,a,b){var d=q.pop().copy(a.pos).sub(c.pos),e=c.r+a.r,f=d.len2();if(f>e*e)return q.push(d),!1;if(b){var g=n(f);b.a=c,b.b=a,b.overlap=e-g,b.overlapN.copy(d.normalize()),b.overlapV.copy(d).scale(b.overlap),b.aInB=c.r<=a.r&&g<=a.r-c.r,b.bInA=a.r<=c.r&&g<=c.r-a.r}return q.push(d),!0},o.testPolygonCircle=j,o.testCirclePolygon=function(b,c,d){var e=j(c,b,d);if(e&&d){var f=d.a,a=d.aInB;d.overlapN.reverse(),d.overlapV.reverse(),d.a=d.b,d.b=f,d.aInB=d.bInA,d.bInA=a}return e},o.testPolygonPolygon=k,o});

//# sourceMappingURL=woof.js.map